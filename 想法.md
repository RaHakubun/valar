ä¸€äº›ä¸ä¸»é¢˜ä¸ç´§å¯†è”ç³»çš„çç¢æƒ³æ³•
RAGæ˜¯å¿…è¦çš„ï¼Œå»ºç«‹çŸ¥è¯†åº“ï¼Œå…ˆæ˜ç™½RAGæœ¬èº«æ€ä¹ˆç”¨ï¼Œè¿™æ˜¯ä»Šå¤©çš„ä»»åŠ¡ï¼Œç¡å‰æå®šè§†é¢‘ï¼Œæ—¢ç„¶æ˜¯å¤§æ¨¡å‹å¼€å‘ç›¸å…³çš„ComfyUIå·¥ä½œæµç”Ÿæˆï¼Œå¾ˆå¤šä¸œè¥¿ä½ ä¸æƒ³äº†è§£ä¹Ÿä¸å¾—ä¸å»äº†è§£äº†ã€‚
1.RAGæ•°æ®åº“å»ºç«‹ï¼š
 å°†ç›¸å…³æ–‡æ¡£with openï¼Œè¿›è¡Œæ‰‹åŠ¨åˆ†å—ã€‚åˆ†å—å¥½çš„å†…å®¹é€šè¿‡embeddingæ¨¡å‹è½¬åŒ–ä¸ºå›ºå®šç»´çš„å‘é‡ï¼Œè¿™ä¸ªæ˜¯æ¨¡å‹è®­ç»ƒå†³å®šçš„ï¼Œå›ºå®š765ç»´ï¼Ÿæ¯ä¸ªchunkå°±è¢«è½¬åŒ–æˆäº†765ç»´çš„å‘é‡ç»„ï¼Œåæ­£äººæ˜¯çœ‹ä¸æ‡‚è¿™ä¸ªçš„ã€‚
 ç„¶åå°±å­˜å…¥äº†å‘é‡æ•°æ®åº“ï¼Œè¿å¸¦ç€idï¼Œdocuments chunkæœ¬èº«ï¼Ÿ
2.RAGç³»ç»Ÿä½¿ç”¨ï¼š
  å­˜è¿›å»è‚¯å®šæ˜¯ä¸ºäº†æ‹¿å‡ºæ¥ä½¿ç”¨çš„ï¼Œç¬¬ä¸€æ­¥å«å¬å›ï¼Ÿå°±æ˜¯æ ¹æ®queryæ‰¾å›å˜›ï¼Œæ‰¾tokä¸ªç›¸å…³çš„ï¼Œæ‹¿å‡ºæ¥äº¤ç»™é‡æ’çš„cross_embeddingæ¨¡å‹ã€‚å†ç²¾ç¡®æˆå‰topkä¸ªï¼ˆå°äºå‰ä¸ªæ•°å­—ï¼‰ã€‚queryä¸æ‰¾å‡ºæ¥çš„listï¼Œä¸€å¹¶æ‹¿ç»™å¤§æ¨¡å‹ï¼›
ç»™æˆ‘çš„æ„Ÿè§‰ï¼š
å…¶å®å°±æ˜¯ä¼ ç»Ÿä¸šåŠ¡çš„æµç¨‹å•Šï¼Œæ‹¿æ¨¡å‹åšä¸€äº›ä¸å¥½ç»“æ„åŒ–çš„å·¥ä½œï¼Œé‚£ä¸è¿˜æ˜¯è¦ç»“æ„åŒ–ã€‚ç°åœ¨è¯´èµ·æ¨¡å‹å¼€å‘çš„äººèµšå¤šå°‘å¤šå°‘é’±ï¼Œä½†æ˜¯å°±è¿™äº›ä¸œè¥¿ï¼Œå¤§å®¶éƒ½åœ¨åšçš„è¯ï¼Œåˆèƒ½å¤Ÿèµšä»€ä¹ˆå¾ˆä¹…çš„é’±å‘¢ï¼Ÿ
æˆ‘è¿˜è§‰å¾—è‡ªå·±ä¸è¯¥å­¦ä¼šï¼Œä¸æƒ³è¿›å…¥ä¸‹ä¸€ä¸ªäººç”Ÿæ­¥éª¤ã€‚
å…¶å®å°±æ˜¯ä¼ ç»Ÿä¸šåŠ¡é€»è¾‘ï¼Œä½ ä¸è¦æŠŠå¤§æ¨¡å‹ç›¸å…³çš„ä¸œè¥¿æƒ³å¾—å¤ªéš¾äº†ï¼›é‚£æˆ‘è§‰å¾—è¿˜æ˜¯ä¼ ç»Ÿä¸šåŠ¡é”»ç‚¼äººã€‚
##Comfy-R1çš„ä¸šåŠ¡é€»è¾‘ï¼›
åˆšåˆšçœ‹äº†ä¸¤çœ¼ï¼Œæ ¹æ®æŸ¥è¯¢æ‰‹æ®µï¼Œæ˜¯æ‹¿openaiçš„text-small-embeddingæ¨¡å‹å…ˆå‘é‡åŒ–æ‰€æœ‰çš„å·¥ä½œæµï¼Œretrieveå‡ºæ¥ã€‚æ”¶é›†æ‰€æœ‰çš„nodeã€‚å°†ã€queryï¼Œnodes listã€‘å‘é€ç»™R1æ¨¡å‹ï¼›
æˆ‘ä»¬çš„å·¥ä½œä¸åŒä¹‹å¤„å°±åœ¨äºé¦–å…ˆæœ‰ä¸€ä¸ªæœ€åº•å±‚çš„ï¼Œç»“æ„æ± å’Œåè®®ï¼Œçº¦å®šå¤§äºé…ç½®ï¼›
ä»è¿™ä¸ªé¡¹ç›®æ˜ç™½æ€ä¹ˆæ ·ä»æœ€åº•å±‚çš„å·¥ä½œæµæˆ–è€…ä»£ç è½¬åˆ°æ¨¡å—å·¥ä½œæµï¼Œå¾ˆæœ‰å¿…è¦ï¼›
ç»“æ„æ± å­çš„æ¦‚å¿µï¼Œè¦æ¼”åŒ–ï¼Œæ€»è¦å…ˆçº¦å®šå¥½åè®®å§ã€‚

ä¸å·¥ä½œæµä¼˜åŒ–ç›¸å…³çš„æƒ³æ³•ï¼š
æˆ‘ä»¬å®éªŒå®¤æƒ³è¦åšä¸€ä¸ªæ–°çš„ComfyUIå·¥ä½œæµä¼˜åŒ–çš„å·¥ä½œã€‚å…·ä½“é—®é¢˜åœ¨äºè§£å†³éšç€æ¨¡å‹çš„æ›´æ–°æ¢ä»£ï¼Œå¸Œæœ›èƒ½å¤Ÿè‡ªåŠ¨æ›¿æ¢æ—§æœ‰å·¥ä½œæµçš„æ—§æ¨¡å‹ç»„ä»¶ï¼Œä½¿å¾—æ–°çš„å·¥ä½œæµç¬¦åˆäººç±»æ„å›¾ï¼›
é¦–å…ˆæŠŠæ•´ä¸ªç”Ÿæˆæ¡†æ¶åˆ†ä¸ºä¸‰å±‚ï¼Œè¿™æ˜¯ç›®å‰çš„å·¥ä½œæµç”Ÿæˆå·¥ä½œï¼Œè¿˜æ²¡æœ‰æ¶‰åŠåˆ°å¾ˆå¤šä¼˜åŒ–çš„æˆåˆ†ï¼š
1.éœ€æ±‚åˆ†è§£å±‚ï¼šå°†ç”¨æˆ·çš„æ„å›¾åˆ†è§£åˆ°ç³»ç»Ÿå¯ä»¥å¤„ç†çš„å­éœ€æ±‚é“¾è¡¨ï¼›

2.å·¥ä½œæµæ¡†æ¶å±‚ï¼šç”¨è‡ªå®šä¹‰çš„æ¡†æ¶è¯­è¨€ä½œä¸ºæ„å›¾å±‚å’Œæ‰§è¡Œå±‚çš„æ¡¥æ¢ï¼Œä»»ä½•çš„æ›´æ”¹å’Œå·¥ä½œæµç»„ä»¶æ›¿æ¢ï¼Œæ›´æ–°çš„å†³ç­–éƒ½å‘ç”Ÿåœ¨è¿™é‡Œã€‚ä¹Ÿå¯ä»¥çœ‹ä½œè¿™ä¸€å±‚æ˜¯åœ¨åšå½¢å¼è¯­ä¹‰çš„å®šä¹‰ã€‚
    æ•°ç»„é‡Œé¢çš„æ¯ä¸ªå…ƒç´ æ˜¯å·¥ä½œæµæ¡†æ¶çš„ä¸€ä¸ªå…ƒç´ ï¼šç¬¬ä¸€ä¸ªå‚æ•°æ¥è‡ªæ¨¡å‹-æ¨¡å—å·¥ä½œæµæ˜ å°„è¡¨çš„æ¨¡å‹åç§°ï¼Œç¬¬äºŒä¸ªæ˜¯æ¥è‡ªç¬¬ä¸€æ­¥éœ€æ±‚åˆ†è§£åˆ†è§£åˆ°è¿™ä¸ªæ¨¡å‹çš„æç¤ºè¯ï¼Œç¬¬ä¸‰ä¸ªåˆ™æ˜¯æ ‡æ³¨å…ƒç´ é—´ä¾èµ–å…³ç³»çš„æ•°å­—ã€‚
    ä¹Ÿå°±æ˜¯è¯´ï¼ŒäºŒç»´åˆ—è¡¨é‡Œé¢çš„å…ƒç´ åˆ†åˆ«æ˜¯"æ¨¡å‹å","å­éœ€æ±‚",ä¾èµ–çš„ç´¢å¼•ã€‚
    æ ¼å¼ä¸º[["æ¨¡å‹å","å­éœ€æ±‚",ä¾èµ–çš„ç´¢å¼•],[],[],......]ã€‚
    è¾“å‡ºäºŒç»´åº¦åˆ—è¡¨ï¼Œæ ¼å¼ä¸º:
    [["æ¨¡å‹å","æç¤ºè¯",ä¾èµ–çš„ç´¢å¼•],[],[],......]
ä¸€äº›æ­£ç¡®çš„è¾“å‡ºæ ¼å¼å¦‚ä¸‹:
    ç¬¬ä¸€ä¸ªä¾‹å­:
    [
        [
        "Fluxæ¨¡å‹æ–‡ç”Ÿå›¾",
        "best quality, masterpiece, HDR, UHD, 8K, a male basketball player shooting in a gym, dynamic pose, focused expression, indoor court with wooden flooring, bright stadium lighting, realistic style",
        -1
        ]
    ]
    ç¬¬äºŒä¸ªä¾‹å­:
    [
        [
            "FluxContext",
            "replace red car with green car, best quality, masterpiece, HDR, UHD, 8K, oil_painting",
            -1
        ],
        [
            "å›¾ç‰‡2å€è¶…åˆ†è¾¨ç‡",
            "2x super resolution, best quality, masterpiece, HDR, UHD, 8K, oil_painting",
            0
        ]
    ]
ç°åœ¨æˆ‘ä»¬è®²æ¨¡å‹-æ¨¡å—å·¥ä½œæµæ˜ å°„è¡¨çš„æ ·å­ã€‚ï¼ˆæ¨¡å—å·¥ä½œæµçš„æ„é€ åœ¨ä¸‹ä¸€æ­¥â€˜å¯æ‰§è¡Œå·¥ä½œæµå±‚â€™è¯¦ç»†ä»‹ç»ï¼‰æ˜¾ç„¶ï¼Œå‰é¢å°±æ˜¯å…·ä½“ç”¨åˆ°çš„æ¨¡å‹çš„åˆ«åã€‚
é•¿è¿™æ ·ï¼š
{
    "hunyuan3D": "model_api/3d_hunyuan3d_image_to_model.json",
    "Fluxæ¨¡å‹æ–‡ç”Ÿå›¾": "model_api\flux_dev_checkpoint_example.json",
    "SD15": "model_ap/sd15.json",
    "SDXL": "model_api/sdxl.json",
    "KColorsæ–‡ç”Ÿå›¾": "model_api\text2image_kcolor.json",
    "KColorså›¾ç”Ÿå›¾": "model_api\text2image_kcolor.json",
    "FluxContext": "model_api\flux_kontext_dev_basic.json",
    "OminiGen": "model_api/image_omnigen2_image_edit.json",
    "è±†åŒ…è§’è‰²ç‰¹å¾ä¿æŒ": "model_api/Character_trait_preservation.json",
    "è±†åŒ…è½®å»“æ§åˆ¶": "model_api/ImageCannyControl.json",
    "è±†åŒ…æ™¯æ·±æ§åˆ¶": "model_api/ImageDepthControl.json",
    "è±†åŒ…äººç‰©å§¿åŠ¿æ§åˆ¶": "model_api/ImagePoseControl.json",
    "è±†åŒ…æ™ºèƒ½æ‰©å›¾": "model_api/Outpainting.json",
    "Outpaint": "model_api/inpaint_model_outpainting.json",
    "è±†åŒ…ä¸»ä½“ä¿æŒ": "model_api/Subject_maintenance.json",
    "å›¾ç‰‡2å€è¶…åˆ†è¾¨ç‡": "model_api/2Ximage.json",
    "å›¾ç‰‡4å€è¶…åˆ†è¾¨ç‡": "model_api/4Ximage.json",
    "è§†é¢‘2å€è¶…åˆ†è¾¨ç‡": "model_api/2xvideo.json",
    "è§†é¢‘å¸§ç‡æå‡2å€": "model_api/video_rate_2x.json",
    "è§†é¢‘å¸§ç‡æå‡3å€": "model_api/video_rate_3x.json",
    "ltxvt2ç§’": "model_api/ltxv_text_to_video.json",
    "ltxvt3ç§’": "model_api/ltxv_text_to_video_copy.json",
    "wan21": "model_api/text_to_video_wan.json",
    "ltxvv2ç§’": "model_api/ltxv_image_to_video.json",
    "ltxvv3ç§’": "model_api/ltxv_image_to_video_copy.json",
    "svd": "model_api/image_to_video_svd.json",
    "wan21v": "model_api/image_to_video_wan.json",
    "ltxvvè§†é¢‘": "model_api/ltxv_video_to_video.json",
    "stableaudio": "model_api/audio_stable_audio.json"
}
åé¢çš„jsonå°±æ˜¯ä¸€ä¸ªå®é™…çš„ï¼ŒåŒ…å«å‰é¢æ¨¡å‹çš„å·¥ä½œæµï¼Œå…¶å®ä½ ä¹ŸçŸ¥é“ï¼Œåœ¨åé¢çš„jsoné‡Œé¢è‚¯å®šä¹Ÿä¸æ­¢ä¸€ä¸ªæ¨¡å‹ï¼Œè‚¯å®šä¼šæœ‰å…¶ä»–æ¨¡å‹ï¼Œä½†æ˜¯æˆ‘ä»¬è§‰å¾—é‚£äº›æ¨¡å‹ä¸èƒ½å¤Ÿï¼Œä¹Ÿä¸éœ€è¦ç›´æ¥åæ˜ åˆ°å·¥ä½œæµæ¡†æ¶ï¼Œæˆ–è€…éœ€æ±‚ä¸Šé¢å»ã€‚
æ¯”å¦‚clipæ¨¡å‹ï¼Œksampleræ¨¡å‹ã€‚ä»–ä»¬å½“ç„¶æ˜¯ä¸å¯æˆ–ç¼ºçš„ï¼Œä½†æ˜¯å¯¹äºæ•´ä¸ªä¸šåŠ¡æ¥è®²é‡è¦å˜›ï¼Ÿå…¶å®æ˜¯å¯ä»¥ä¸çŸ¥é“çš„ã€‚ä¹Ÿå°±æ˜¯å°†ï¼Œé€šè¿‡å°†è¿™äº›æœ‰æ„ä¹‰çš„æ¨¡å‹å’Œæ‰§è¡Œä¸Šä¸å¯æˆ–ç¼ºçš„nodeåšæˆâ€˜é¢„åˆ¶èœâ€™-æ¨¡å—å·¥ä½œæµã€‚è¿™å°±æ˜¯æˆ‘è®¤ä¸ºæœ‰æ„ä¹‰çš„ç»“æ„å•å…ƒã€‚
3.å¯æ‰§è¡Œå·¥ä½œæµå±‚ï¼šé€šè¿‡å°†å·¥ä½œæµæ¡†æ¶æ˜ å°„æˆçœŸå®çš„æ¨¡å—å·¥ä½œæµï¼Œå†å¯¹è¿™ä¸ªæ¨¡å—å·¥ä½œæµè¿›è¡Œæ‹¼æ¥ï¼ˆå¯ä»¥çº¯ç®—æ³•ï¼Œä¸éœ€è¦æ¨¡å‹ï¼‰ï¼Œå»æ‰ä¸­é—´è¾“å…¥è¾“å‡ºçš„ä¸€äº›æ–‡å­—å›¾åƒèŠ‚ç‚¹ï¼Œä¿ç•™ä¸¤ç«¯çš„è¾“å…¥è¾“å‡ºèŠ‚ç‚¹ã€‚å°±å¯ä»¥æ‹¼æ¥å¾—åˆ°ä¸€ä¸ªåˆç†çš„å¯æ‰§è¡Œå·¥ä½œæµï¼›
å¯æ‰§è¡Œå·¥ä½œæµçš„ä»£ç å¦‚ä¸‹ï¼š
'''
import json
import os
from modify_json_images_videos import modify_json_images_videos
from replace_prefix_keys import replace_prefix_keys
from comfyui_exe import generate_files_from_prompt
def find_max_id(data):
    """
    ä»ç»™å®šçš„JSONç»“æ„ä¸­æ‰¾å‡ºæœ€å¤§ç¼–å·çš„å€¼
    
    å‚æ•°:
        data (dict): åŒ…å«èŠ‚ç‚¹ä¿¡æ¯çš„å­—å…¸
        
    è¿”å›:
        int: æœ€å¤§ç¼–å·çš„å€¼
    """
    max_id = 0
    for key in data.keys():
        if key.isdigit():  # æ£€æŸ¥é”®æ˜¯å¦ä¸ºæ•°å­—
            current_id = int(key)
            if current_id > max_id:
                max_id = current_id
    return max_id

def update_node_numbers(data, max_value):
    # åˆ›å»ºä¸€ä¸ªæ–°çš„å­—å…¸æ¥å­˜å‚¨æ›´æ–°åçš„èŠ‚ç‚¹
    new_data = {}
    
    # éå†åŸå§‹å­—å…¸ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹
    for old_key, node in data.items():
        # å°†é”®è½¬æ¢ä¸ºæ•´æ•°å¹¶åŠ ä¸Šmax_value
        new_key = str(int(old_key) + max_value)
        
        # åˆ›å»ºèŠ‚ç‚¹çš„æ·±æ‹·è´ä»¥é¿å…ä¿®æ”¹åŸå§‹æ•°æ®
        new_node = node.copy()
        
        # æ£€æŸ¥èŠ‚ç‚¹æ˜¯å¦æœ‰inputså­—æ®µ
        if 'inputs' in new_node:
            # éå†inputsä¸­çš„æ¯ä¸ªå€¼
            for input_key, input_value in new_node['inputs'].items():
                # å¦‚æœå€¼æ˜¯åˆ—è¡¨ä¸”ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯å­—ç¬¦ä¸²ï¼ˆå¯èƒ½æ˜¯èŠ‚ç‚¹å¼•ç”¨ï¼‰
                if isinstance(input_value, list) and len(input_value) > 0 and isinstance(input_value[0], str):
                    try:
                        # å°è¯•å°†ç¬¬ä¸€ä¸ªå…ƒç´ è½¬æ¢ä¸ºæ•´æ•°å¹¶åŠ ä¸Šmax_value
                        new_ref = str(int(input_value[0]) + max_value)
                        new_node['inputs'][input_key] = [new_ref] + input_value[1:]
                    except ValueError:
                        # å¦‚æœä¸èƒ½è½¬æ¢ä¸ºæ•´æ•°ï¼Œä¿æŒåŸæ ·
                        pass
        
        # å°†æ›´æ–°åçš„èŠ‚ç‚¹æ·»åŠ åˆ°æ–°å­—å…¸ä¸­
        new_data[new_key] = new_node
    
    return new_data
def find_highest_node_by_type(workflow_dict, class_type):
    matching_nodes = []
    
    for node_id, node_data in workflow_dict.items():
        if node_data.get('class_type') == class_type:
            # Convert node_id to integer for comparison
            try:
                node_id_int = int(node_id)
                matching_nodes.append(node_id_int)
            except ValueError:
                # Handle case where node_id isn't a number (though unlikely in this context)
                pass
    
    if not matching_nodes:
        return None
    
    return str(max(matching_nodes))
def modify_node_input(data, class_type, input_class, num):
    """
    ä¿®æ”¹æŒ‡å®šèŠ‚ç‚¹çš„è¾“å…¥ç±»å¯¹åº”çš„è¿æ¥ç¼–å·
    
    å‚æ•°:
        data: åŒ…å«æ‰€æœ‰èŠ‚ç‚¹æ•°æ®çš„å­—å…¸
        class_type: è¦ä¿®æ”¹çš„èŠ‚ç‚¹çš„class_type
        input_class: è¦ä¿®æ”¹çš„è¾“å…¥å­—æ®µå
        num: æ–°çš„è¿æ¥ç¼–å·(å­—ç¬¦ä¸²)
        
    è¿”å›:
        ä¿®æ”¹åçš„dataå­—å…¸
    """
    # éå†æ‰€æœ‰èŠ‚ç‚¹
    for node_id, node_data in data.items():
        # æ£€æŸ¥æ˜¯å¦æ˜¯ç›®æ ‡èŠ‚ç‚¹ç±»å‹
        if node_data.get("class_type") == class_type:
            # æ£€æŸ¥æ˜¯å¦æœ‰inputså­—æ®µå’ŒæŒ‡å®šçš„input_class
            if "inputs" in node_data and input_class in node_data["inputs"]:
                # è·å–å½“å‰è¾“å…¥å€¼
                current_value = node_data["inputs"][input_class]
                
                # å¦‚æœæ˜¯åˆ—è¡¨å½¢å¼ä¸”é•¿åº¦ä¸º2ä¸”ç¬¬äºŒä¸ªå…ƒç´ æ˜¯æ•°å­—
                if isinstance(current_value, list) and len(current_value) == 2 and isinstance(current_value[1], int):
                    # ä¿®æ”¹ç¬¬ä¸€ä¸ªå…ƒç´ ä¸ºæ–°çš„num
                    node_data["inputs"][input_class][0] = str(num)
                    
    return data


def merge_dicts_update(dict1, dict2):
    """
    ä½¿ç”¨updateæ–¹æ³•åˆå¹¶ä¸¤ä¸ªå­—å…¸
    æ³¨æ„ï¼šè¿™ä¼šä¿®æ”¹dict1çš„å†…å®¹
    """
    result = dict1.copy()  # é¿å…ä¿®æ”¹åŸå§‹å­—å…¸
    result.update(dict2)
    return result

def merge_2_workflow(data1,data2,data1_output_id,):
    """
    å¯¹äºæœ‰ä¾èµ–å…³ç³»çš„ä¸¤ä¸ªæ¡†æ¶Aå’ŒBï¼Œ
    å°†Aä¸­çš„èµ„æºè¾“å‡ºèŠ‚ç‚¹è¿å‘Bä¸­çš„èµ„æºè¾“å…¥èŠ‚ç‚¹ã€‚
    
    
    """

    # æ‰¾å‡ºç¬¬ä¸€ä¸ªå·¥ä½œæµçš„æœ€å¤§èŠ‚ç‚¹

    max_id = find_max_id(data1)
    
    # æ‰¾å‡ºç¬¬ä¸€ä¸ªå·¥ä½œæµçš„è¾“å‡ºèŠ‚ç‚¹çš„å¯¹åº”ç¼–å·
    
    # id = find_highest_node_by_type(data1,"VAEDecode")

    # å°†ç¬¬äºŒä¸ªå·¥ä½œæµçš„å…¨éƒ¨èŠ‚ç‚¹åŠ ä¸Šåç§»å€¼,ä½¿å¾—ä¸é‡å¤

    data2 = update_node_numbers(data2,max_value=max_id)

    # æ‰¾å‡ºç¬¬äºŒä¸ªå·¥ä½œæµç¬¦åˆå›¾åƒè¾“å…¥çš„èŠ‚ç‚¹ï¼ŒæŒ‡å‘ç¬¬ä¸€ä¸ªå·¥ä½œæµçš„è¾“å‡º
    
    

    data2 = modify_node_input(data2,"CLIPVisionEncode","image",id)
    data2 = modify_node_input(data2,"WanImageToVideo","start_image",id)
    data2 = modify_node_input(data2,"VAEEncode","pixels",id)
    # æœ€ååˆå¹¶å·¥ä½œæµ

    
    
    last = merge_dicts_update(data1,data2)


    # å†™å…¥JSONæ–‡ä»¶ï¼ˆå¸¦ç¼©è¿›æ ¼å¼åŒ–ï¼‰
    with open('generated_workflow/dad.json', 'w', encoding='utf-8') as f:
        json.dump(last, f, ensure_ascii=False, indent=4)
    
    return last

    pass

def modify_all_positive_texts(json_data, new_text):
    """
    ä¿®æ”¹JSONæ•°æ®ä¸­æ‰€æœ‰positiveèŠ‚ç‚¹å¯¹åº”çš„æ–‡æœ¬è¾“å…¥æ¡†çš„textå€¼
    
    å‚æ•°:
        json_data: åŒ…å«å·¥ä½œæµæ•°æ®çš„JSONå¯¹è±¡
        new_text: è¦æ›¿æ¢çš„æ–°æ–‡æœ¬
    
    è¿”å›:
        ä¿®æ”¹åçš„JSONæ•°æ®
    """
    # éå†æ‰€æœ‰èŠ‚ç‚¹
    for node_id, node_data in json_data.items():
        # æ£€æŸ¥èŠ‚ç‚¹æ˜¯å¦æœ‰inputs
        if "inputs" not in node_data:
            continue
            
        inputs = node_data["inputs"]
        
        # æ£€æŸ¥æ˜¯å¦æœ‰positiveè¾“å…¥ï¼ˆå¯èƒ½æ˜¯åˆ—è¡¨æˆ–å­—å…¸ï¼‰
        if "positive" in inputs:
            positive_ref = inputs["positive"]
            
            # å¦‚æœpositiveæ˜¯åˆ—è¡¨ï¼ˆå¦‚ ["6", 0]ï¼‰
            if isinstance(positive_ref, list) and len(positive_ref) >= 1:
                ref_node_id = str(positive_ref[0])  # ç¡®ä¿æ˜¯å­—ç¬¦ä¸²
                
                # æ‰¾åˆ°å¯¹åº”çš„èŠ‚ç‚¹
                if ref_node_id in json_data:
                    ref_node = json_data[ref_node_id]
                    
                    # æ£€æŸ¥è¯¥èŠ‚ç‚¹æ˜¯å¦æœ‰textè¾“å…¥ï¼ˆä¸é™å®šCLIPTextEncodeï¼‰
                    if "inputs" in ref_node and "text" in ref_node["inputs"]:
                        ref_node["inputs"]["text"] = new_text
                        
            # å¦‚æœpositiveæ˜¯å­—å…¸ï¼ˆæŸäº›å·¥ä½œæµå¯èƒ½ä¸åŒï¼‰
            elif isinstance(positive_ref, dict) and "text" in positive_ref:
                positive_ref["text"] = new_text
    
    return json_data
# å®šä¹‰ load_workflow å‡½æ•°
def load_workflow(file_path):
    """ä» JSON æ–‡ä»¶åŠ è½½å·¥ä½œæµæ•°æ®"""
    with open(file_path, 'r', encoding='utf-8') as f:
        return json.load(f)

def find_start_end_nodes(dag):
    # æ”¶é›†æ‰€æœ‰èŠ‚ç‚¹ID
    all_nodes = set(dag.keys())
    
    # æ„å»ºä¾èµ–å…³ç³»ï¼šè®°å½•æ¯ä¸ªèŠ‚ç‚¹çš„è¾“å…¥æ¥æº
    dependencies = {node_id: set() for node_id in all_nodes}
    # æ„å»ºè¢«ä¾èµ–å…³ç³»ï¼šè®°å½•æ¯ä¸ªèŠ‚ç‚¹çš„è¾“å‡ºå»å‘
    dependents = {node_id: set() for node_id in all_nodes}
    
    for node_id, node_data in dag.items():
        inputs = node_data.get('inputs', {})
        
        # éå†æ‰€æœ‰è¾“å…¥è¿æ¥
        for input_name, input_value in inputs.items():
            # è¾“å…¥è¿æ¥å¯èƒ½æ˜¯åˆ—è¡¨å½¢å¼ [source_node_id, output_index]
            if isinstance(input_value, list) and len(input_value) >= 2:
                source_node = str(input_value[0])  # è½¬æ¢ä¸ºå­—ç¬¦ä¸²ä»¥ç¡®ä¿ç±»å‹ä¸€è‡´
                if source_node in all_nodes:  # ç¡®ä¿å¼•ç”¨çš„èŠ‚ç‚¹å­˜åœ¨
                    dependencies[node_id].add(source_node)
                    dependents[source_node].add(node_id)
    
    # èµ·å§‹èŠ‚ç‚¹ï¼šæ²¡æœ‰ä¾èµ–å…¶ä»–èŠ‚ç‚¹çš„èŠ‚ç‚¹
    start_nodes = [node_id for node_id in all_nodes if not dependencies[node_id]]
    
    # ç»“æŸèŠ‚ç‚¹ï¼šæ²¡æœ‰è¢«ä»»ä½•å…¶ä»–èŠ‚ç‚¹ä¾èµ–çš„èŠ‚ç‚¹
    end_nodes = [node_id for node_id in all_nodes if not dependents[node_id]]
    
    return start_nodes, end_nodes

def find_direct_dependents(dag, node_id):
    """
    æ‰¾å‡ºæ‰€æœ‰ç›´æ¥ä¾èµ–æŒ‡å®šèŠ‚ç‚¹çš„èŠ‚ç‚¹IDåˆ—è¡¨ï¼ˆä¸é€’å½’æŸ¥æ‰¾é—´æ¥ä¾èµ–ï¼‰
    
    å‚æ•°:
        dag: DAGç»“æ„ï¼Œå­—å…¸æ ¼å¼
        node_id: è¦æŸ¥æ‰¾çš„èŠ‚ç‚¹IDï¼ˆå­—ç¬¦ä¸²æˆ–æ•°å­—ï¼‰
        
    è¿”å›:
        ç›´æ¥ä¾èµ–è¯¥èŠ‚ç‚¹çš„æ‰€æœ‰èŠ‚ç‚¹IDåˆ—è¡¨ï¼ˆæŒ‰è¾“å…¥é¡ºåºæ’åºï¼‰
    """
    node_id = str(node_id)  # ç¡®ä¿ç»Ÿä¸€ä¸ºå­—ç¬¦ä¸²æ ¼å¼
    dependents = []
    
    for current_node_id, node_data in dag.items():
        inputs = node_data.get('inputs', {})
        
        # æ£€æŸ¥æ‰€æœ‰è¾“å…¥è¿æ¥
        for input_value in inputs.values():
            # å¤„ç†å•ä¸ªè¿æ¥æˆ–è¿æ¥åˆ—è¡¨
            connections = [input_value] if not isinstance(input_value, list) else input_value
            
            for conn in connections:
                # æ£€æŸ¥æ˜¯å¦æ˜¯èŠ‚ç‚¹è¿æ¥æ ¼å¼ (å¦‚ ["50", 0] æˆ– "50")
                if isinstance(conn, list) and len(conn) > 0:
                    dep_id = str(conn[0]) if len(conn) > 0 else None
                elif isinstance(conn, str):
                    dep_id = conn
                else:
                    continue  # å¿½ç•¥éè¿æ¥æ ¼å¼çš„è¾“å…¥
                
                if dep_id == node_id:
                    dependents.append(current_node_id)
                    break  # é¿å…é‡å¤è®°å½•åŒä¸€ä¸ªèŠ‚ç‚¹
    
    return dependents

def find_min_text_or_prompt_node_id(dag_data):
    """
    è¿”å›æ‹¥æœ‰textæˆ–promptå­—æ®µçš„æœ€å°èŠ‚ç‚¹ID
    """
    nodes = []
    
    # éå†æ‰€æœ‰èŠ‚ç‚¹
    for node_id, node_data in dag_data.items():
        inputs = node_data.get("inputs", {})
        # æ£€æŸ¥èŠ‚ç‚¹æ˜¯å¦æœ‰inputsä¸”åŒ…å«textæˆ–promptå­—æ®µ
        if "text" in inputs or "prompt" in inputs:
            nodes.append(node_id)
    
    # å¦‚æœæ²¡æœ‰æ‰¾åˆ°ä»»ä½•ç¬¦åˆæ¡ä»¶çš„èŠ‚ç‚¹ï¼Œè¿”å›ç©ºå­—ç¬¦ä¸²
    if not nodes:
        return ""
    
    # æ‰¾åˆ°IDå€¼æœ€å°çš„èŠ‚ç‚¹ï¼ˆè½¬æ¢ä¸ºæ•´æ•°æ¯”è¾ƒï¼‰
    min_id = min(nodes, key=lambda x: int(x))
    
    return min_id


def find_dependent_nodes(data):
    dependent_nodes = set()
    
    for key, value in data.items():
        if isinstance(value, list):
            for item in value:
                if isinstance(item, str) and item.isdigit():
                    dependent_nodes.add(item)
        # ä¸å¤„ç†éå­—ç¬¦ä¸²çš„æ•°å­—ï¼ˆå¦‚ 0, 1, 2ï¼‰
    
    return sorted(dependent_nodes)

def find_matching_field(input_dict):
    """
    éå†è¾“å…¥å­—å…¸ä¸­çš„inputså­—æ®µï¼Œè¿”å›ç¬¬ä¸€ä¸ªåœ¨é¢„è®¾åˆ—è¡¨ä¸­å­˜åœ¨çš„å­—æ®µåã€‚
    ç¡¬ç¼–ç çš„æ£€æŸ¥å­—æ®µåˆ—è¡¨: ["vae", "pixels", "other_field"]
    
    å‚æ•°:
        input_dict (dict): åŒ…å«inputså­—æ®µçš„å­—å…¸
        
    è¿”å›:
        str: ç¬¬ä¸€ä¸ªåŒ¹é…çš„å­—æ®µåï¼Œå¦‚æœæ²¡æœ‰åŒ¹é…åˆ™è¿”å›None
    """
    fields_to_check = ["image","pixels","images","start_image","init_image","video"]  # ç¡¬ç¼–ç çš„å­—æ®µåˆ—è¡¨
    inputs = input_dict.get('inputs', {})
    for field in fields_to_check:
        if field in inputs:
            return field
    return None
def merge_two_flow(data1,data2):
    # æ‰¾å‡ºç¬¬ä¸€ä¸ªå·¥ä½œæµçš„æœ€å¤§èŠ‚ç‚¹

    max_id = find_max_id(data1)

    # å°†ç¬¬äºŒä¸ªå·¥ä½œæµçš„å…¨éƒ¨èŠ‚ç‚¹åŠ ä¸Šåç§»å€¼,ä½¿å¾—ä¸é‡å¤

    data2 = update_node_numbers(data2,max_value=max_id)

    ## æ‰¾å‡ºdata1çš„æ‰€æœ‰ç»“æŸèŠ‚ç‚¹

    _,data1_last_ids = find_start_end_nodes(data1)
    print("å…¨éƒ¨è¾“å‡º:")
    print(data1_last_ids)
    ## æŒ‰ç…§data1çš„ç»“æŸèŠ‚ç‚¹ä¸­çš„inputæ‰¾å‡ºæœ€è¿‘çš„è¾“å‡ºèŠ‚ç‚¹

    data1_last_output_id = find_dependent_nodes(data1[data1_last_ids[0]]["inputs"])[0]
    print(data1_last_output_id)
    
    ## æ‰¾å‡ºdata2æ‰€æœ‰çš„å¼€å§‹èŠ‚ç‚¹

    data2_start_ids,_ = find_start_end_nodes(data2)
    print(data2_start_ids)

    ## è¿‡æ»¤data2çš„å¼€å§‹èŠ‚ç‚¹ï¼Œåªä¿ç•™ä¸èµ„æºè¾“å…¥æœ‰å…³çš„

    source_input_ids = [] ##å€™é€‰çš„èµ„æºè¾“å…¥èŠ‚ç‚¹

    for id in data2_start_ids:
        if data2[id]['class_type'] in ["LoadImage"]:
            source_input_ids.append(id)
    print(source_input_ids)
    ## æ‰¾å‡ºdata2å¼€å§‹èŠ‚ç‚¹çš„ä¾èµ–èŠ‚ç‚¹

    data2_input_ids = []
    for id in source_input_ids:
        print("æ¬¡çº§è¾“å…¥èŠ‚ç‚¹")
        data2_input_ids = find_direct_dependents(data2,id)
        print(data2_input_ids)

    ## å°†data1çš„è¾“å‡ºèŠ‚ç‚¹è¿å‘data2çš„æ¬¡çº§è¾“å…¥èŠ‚ç‚¹

    for id in data2_input_ids:
        print(id)
        match_filed = find_matching_field(data2[id])
        print(match_filed)
        data2[id]["inputs"][match_filed][0] = data1_last_output_id

        pass
    ## è¿”å›ç¬¬äºŒä¸ªå·¥ä½œæµ

    return data2
def load_task_paths(json_file_path):
    try:
        with open(json_file_path, 'r', encoding='utf-8') as file:
            task_paths = json.load(file)
        return task_paths
    except FileNotFoundError:
        print(f"é”™è¯¯ï¼šæ‰¾ä¸åˆ°é…ç½®æ–‡ä»¶ {json_file_path}")
        return {}
    except json.JSONDecodeError:
        print(f"é”™è¯¯ï¼šé…ç½®æ–‡ä»¶ {json_file_path} æ ¼å¼ä¸æ­£ç¡®")
        return {}
def run(task_name,resource,input):
    """
    resourceæ˜¯åŸå§‹è¾“å…¥
    """
    config_file = 'tasks_config.json'  # å¦‚æœæ–‡ä»¶ä¸åœ¨åŒä¸€ç›®å½•ï¼Œè¯·æä¾›å®Œæ•´è·¯å¾„

    # å¼ºåˆ¶å°†ä¾èµ–ç´¢å¼•æ›´ä¸ºæ•°å­—
    for i in range(len(input)):
        input[i][-1] = int(input[i][-1])

    # åŠ è½½ä»»åŠ¡æ¨¡å‹åŠå¯¹åº”çš„æ‰§è¡Œapi
    task_basic_path = load_task_paths(config_file)
    for i in range(len(input)):
        input[i].append(load_workflow(task_basic_path[input[i][0]]))

    

    for i in range(len(input)):
        # é’ˆå¯¹æ¯ä¸ªå•ç‹¬çš„å­ä»»åŠ¡è¿›è¡Œæç¤ºè¯æ„é€ å¹¶èµ‹å€¼
        id = find_min_text_or_prompt_node_id(input[i][-1])
        if id != "":
            # è·å–textæˆ–promptçš„å€¼
            value = input[i][1]
            
            # æ£€æŸ¥æ˜¯å¦å­˜åœ¨texté”®
            if "text" in input[i][-1][id]["inputs"]:
                input[i][-1][id]["inputs"]["text"] = value
            # æ£€æŸ¥æ˜¯å¦å­˜åœ¨prompté”®
            elif "prompt" in input[i][-1][id]["inputs"]:
                input[i][-1][id]["inputs"]["prompt"] = value
    
    ##èµ„æºè¾“å…¥å’Œç›®æ ‡æ–‡ä»¶åè¾“å…¥
    for i in range(len(input)):
        if resource != "" and resource != None:

            input[i][-1] = modify_json_images_videos(input[i][-1],resource)
        
        input[i][-1] = replace_prefix_keys(input[i][-1],task_name)
        pass
    
    if len(input) == 1:

        last = input[0][-1]
        ## ä¿å­˜ä¸ºjsonæ–‡ä»¶
        with open('generated_workflow/dad.json', 'w', encoding='utf-8') as f:
            json.dump(last, f, ensure_ascii=False, indent=4)
        
        generate_files_from_prompt(last)
        ## é‡Šæ”¾ç¼“å­˜
        if input[0][0] != "KColorså›¾ç”Ÿå›¾":
            generate_files_from_prompt(load_workflow("workflows_api/clear_gpu.json"))
        pass
    else:
        temp_output = [0]*len(input) ## ç¼“å­˜æ‰§è¡Œçš„è¾“å‡º
        for i in range(len(input)):
            ## å¯¹æ¯ä¸ªä»»åŠ¡æ‰§è¡Œï¼Œå¹¶è·å¾—è¾“å‡ºçš„èµ„æº
            if input[i][-2] == -1:
                output_name = generate_files_from_prompt(input[i][-1])[-1]
                temp_output[i] = output_name
                if input[i][0] != "KColorså›¾ç”Ÿå›¾":
                    generate_files_from_prompt(load_workflow("workflows_api/clear_gpu.json"))
            else:
                input[i][-1] = modify_json_images_videos(input[i][-1],temp_output[input[i][-2]])
                output_name = generate_files_from_prompt(input[i][-1])[-1]
                temp_output[i] = output_name
                if input[i][0] != "KColorså›¾ç”Ÿå›¾":
                    generate_files_from_prompt(load_workflow("workflows_api/clear_gpu.json"))
            

            

            pass
        ## å¯¹inputä¸­æ¯ä¸€ä¸ªæµç¨‹å¢åŠ idåç§»å€¼
        for i in range(len(input)):
            if i == 0:
                continue
            input[i][-1] = update_node_numbers(input[i][-1],find_max_id(input[i-1][-1]))
            pass
        ## æŒ‰ç…§inputä¸­æ¯ä¸ªæµç¨‹çš„ä¾èµ–å…³ç³»æ›´æ–°æµç¨‹,å…¶ä¸­å€’æ•°ç¬¬äºŒä¸ªç´¢å¼•æ˜¯ä¾èµ–çš„ç´¢å¼•ï¼Œ-1æ˜¯æ²¡æœ‰å‰ç½®ä¾èµ–ï¼Œä½¿ç”¨merge_two_flowå‡½æ•°
        for i in range(len(input)):
            if input[i][-2] == -1:
                continue
            input[i][-1] = merge_two_flow(input[input[i][-2]][-1],input[i][-1])



        ## å°†æ‰€æœ‰æµç¨‹æ–‡ä»¶ï¼Œåˆå¹¶ä¸ºä¸€ä¸ªï¼Œå°±æ˜¯åˆå¹¶æ‰€æœ‰å­—å…¸ï¼Œä¸éœ€è¦merge_two_flowå‡½æ•°,åªç”¨å†…ç½®çš„å­—å…¸åˆå¹¶å‡½æ•°å°±å¥½
        last = {}
        for i in range(len(input)):
            last = merge_dicts_update(last,input[i][-1])
        ## ä¿å­˜ä¸ºjsonæ–‡ä»¶
        with open('generated_workflow/dad.json', 'w', encoding='utf-8') as f:
            json.dump(last, f, ensure_ascii=False, indent=4)


    pass
if __name__ == "__main__":

    
    input = [  
        ["æ–‡ç”Ÿå›¾", "A cute orange tabby cat, sitting on a white background, detailed fur, bright eyes, photorealistic style, 8K resolution, soft lighting, high detail.", -1],  
        ["æ–‡ç”Ÿå›¾", "A small black dog riding a bicycle on a sunny road, cartoon-style, vibrant colors, dynamic pose, playful expression, background with trees and blue sky.", -1]]

    run(input)

'''
é€šè¿‡è¿™ä¸ªä¸¥è°¨çš„ç®—æ³•æ‹¼æ¥ï¼Œå¯ä»¥ä¿è¯æœ€ç»ˆçš„å·¥ä½œæµæ˜¯ä¸ä¼šç¼ºå¤±èŠ‚ç‚¹ï¼Œä¸ä¼šäº§ç”Ÿå¹»è§‰ã€‚

4.æ¨¡å—å·¥ä½œæµçš„æ„å»ºä¹Ÿæ˜¯å¾ˆé‡è¦çš„ï¼ï¼ï¼å› ä¸ºå®ƒæ‰æ˜¯çœŸæ­£æ‰§è¡Œçš„æˆåˆ†ï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„â€˜ç»“æ„å•å…ƒâ€™ã€‚æ¨¡å—å·¥ä½œæµçš„å»ºæ„è¿‡ç¨‹ï¼Œæ—¢æœ‰ç°å®çš„å·¥ä½œæµï¼Œä¹Ÿæœ‰èŠ‚ç‚¹ç±»å»åšç±»å‹åŒ¹é…ï¼Œåšå‡ºä¸€ä¸ªä½¿ç”¨æŸä¸ªç‰¹å®šæ¨¡å‹çš„æ¨¡å—å·¥ä½œæµã€‚
æˆ‘ä»¬ä¼šå¯¹è¿™ä¸ªå·¥ä½œæµåšä¸€ä¸ªè¯­ä¹‰æ˜ å°„ï¼ŒæŠŠå®ƒçš„æ¨¡å‹æ„å›¾æŠ½å‡ºæ¥äº¤ç»™å·¥ä½œæµæ¡†æ¶å±‚è¿›è¡Œå†³ç­–å’Œé€‰å–ï¼Œä¹Ÿå°±æ˜¯ä½ åœ¨å·¥ä½œæµæ¡†æ¶é‚£ä¸ªç‚¹çœ‹åˆ°çš„è¡¨ï¼›å†å¾€ä¸ŠæŠ½ï¼Œäº¤ç»™éœ€æ±‚åˆ†è§£å±‚åˆ†è§£åˆ°å¯¹åº”çš„æ¨¡æ€é¢†åŸŸã€‚æ‰€ä»¥å…³äºæ¨¡å—å·¥ä½œæµæœ‰ä¸€é¢—ç´¢å¼•æ ‘ã€‚
è¿™é‡Œæ˜¯æ„å»ºæ¨¡å—å·¥ä½œæµçš„ä»£ç ï¼Œä½ å¯ä»¥æƒ³ä¸€ä¸‹å®ƒçš„è¾“å…¥è¾“å‡ºï¼š
import yaml
import re
import json
from dag_encode import parse_code_to_dag

def parse_yaml(yaml_content):
    """è§£æYAMLå†…å®¹ï¼Œæå–å‡½æ•°å‚æ•°ä¿¡æ¯"""
    return yaml.safe_load(yaml_content)

def generate_function_calls(function_list, yaml_data):
    """ç”Ÿæˆå‡½æ•°è°ƒç”¨å­—ç¬¦ä¸²"""
    var_counter = 1
    var_mapping = {}  # è·Ÿè¸ªæ¯ä¸ªç±»å‹çš„æœ€æ–°å˜é‡
    output_mapping = {}  # è·Ÿè¸ªæ¯ä¸ªå‡½æ•°è¾“å‡ºçš„å˜é‡å’Œç±»å‹
    
    function_calls = []
    
    # ä»YAMLä¸­æå–æ‰€æœ‰å‡½æ•°çš„ä¿¡æ¯
    function_info = {}
    for func_name, func_data in yaml_data.items():
        input_params = func_data.get('input_params', {})
        output_params = func_data.get('output_params', {})
        
        # æå–è¾“å‡ºç±»å‹åŠå…¶ç´¢å¼•ï¼ˆæŒ‰å®šä¹‰é¡ºåºï¼‰
        output_types = {}
        if output_params:  # ä»…å¤„ç†æœ‰è¾“å‡ºå‚æ•°çš„å‡½æ•°
            # å®‰å…¨è§£æoutput_keyï¼Œç¡®ä¿ä¸æŠ›å‡ºç´¢å¼•é”™è¯¯
            sorted_outputs = []
            for output_key in output_params:
                # æå–output_keyä¸­çš„æ•°å­—éƒ¨åˆ†ï¼ˆå…¼å®¹å„ç§æ ¼å¼ï¼‰
                try:
                    # å°è¯•ä»output_keyä¸­æå–æ•°å­—ï¼ˆå¦‚output_0 -> 0ï¼‰
                    key_num = int(output_key.split('_')[-1])
                except (IndexError, ValueError):
                    # å¦‚æœè§£æå¤±è´¥ï¼Œä½¿ç”¨å½“å‰é•¿åº¦ä½œä¸ºç´¢å¼•ï¼ˆä¿åº•ç­–ç•¥ï¼‰
                    key_num = len(sorted_outputs)
                sorted_outputs.append((key_num, output_key))
            
            # æŒ‰æ•°å­—æ’åºå¹¶åˆ†é…ç´¢å¼•
            sorted_outputs.sort(key=lambda x: x[0])
            for index, (_, output_key) in enumerate(sorted_outputs):
                output_type = output_params[output_key]
                output_types[index] = output_type
        
        function_info[func_name] = {
            'input_params': input_params,
            'output_types': output_types,
            'output_count': len(output_params)
        }
    
    # å¤„ç†å‡½æ•°åˆ—è¡¨
    for func_name in function_list:
        # å¦‚æœå‡½æ•°ä¸åœ¨YAMLæ•°æ®ä¸­ï¼Œåˆ›å»ºé€šç”¨æ¨¡æ¿
        if func_name not in function_info:
            var_name = f'var_{var_counter}'
            function_calls.append(f'{var_name} = {func_name}()')
            var_counter += 1
            continue
        
        func_info = function_info[func_name]
        input_params = func_info['input_params']
        
        # æ„å»ºå‚æ•°åˆ—è¡¨
        param_list = []
        for param_name, param_info in input_params.items():
            param_type = param_info.get('type', '')
            
            # å¤„ç†ä¾èµ–å…³ç³»
            if param_type in var_mapping:
                source_var = var_mapping[param_type]
                
                # æ£€æŸ¥æ˜¯å¦éœ€è¦ç´¢å¼•è®¿é—®
                if source_var in output_mapping:
                    # è·å–è¯¥å‡½æ•°çš„æ‰€æœ‰è¾“å‡ºç±»å‹
                    output_types = output_mapping[source_var]
                    output_count = len(output_types)
                    
                    if output_count > 1:
                        # å¤šè¾“å‡ºå‡½æ•°ï¼ŒæŸ¥æ‰¾è¯¥ç±»å‹çš„ç´¢å¼•
                        indices = [idx for idx, typ in output_types.items() if typ == param_type]
                        
                        if indices:
                            # ä½¿ç”¨æ‰¾åˆ°çš„ç¬¬ä¸€ä¸ªç´¢å¼•
                            index = indices[0]
                            param_value = f'{source_var}[{index}]'
                        else:
                            # æœªæ‰¾åˆ°ç‰¹å®šç±»å‹çš„ç´¢å¼•ï¼Œä½¿ç”¨ç¬¬ä¸€ä¸ªè¾“å‡º
                            print(f"è­¦å‘Š: å‡½æ•° {func_name} çš„å‚æ•° {param_name} éœ€è¦ç±»å‹ {param_type}ï¼Œä½†åœ¨ {source_var} çš„è¾“å‡ºä¸­æœªæ‰¾åˆ°æ­¤ç±»å‹ï¼Œä½¿ç”¨ç¬¬ä¸€ä¸ªè¾“å‡º")
                            param_value = f'{source_var}[0]'
                    else:
                        # å•è¾“å‡ºå‡½æ•°ï¼Œç›´æ¥ä½¿ç”¨å˜é‡å
                        param_value = source_var
                else:
                    # ä¸æ˜¯å¤šè¾“å‡ºå‡½æ•°ï¼Œç›´æ¥ä½¿ç”¨å˜é‡å
                    param_value = source_var
                
                param_list.append(f'{param_name}={param_value}')
            else:
                # ä½¿ç”¨YAMLä¸­å®šä¹‰çš„é»˜è®¤å€¼ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
                if 'default' in param_info:
                    default_value = param_info['default']
                    
                    # å¤„ç†å­—ç¬¦ä¸²ç±»å‹
                    if isinstance(default_value, str):
                        # æ£€æŸ¥æ˜¯å¦æ˜¯æ•°å­—
                        if default_value.replace('.', '', 1).isdigit():
                            param_list.append(f'{param_name}={default_value}')
                        else:
                            param_list.append(f'{param_name}="{default_value}"')
                    else:
                        param_list.append(f'{param_name}={default_value}')
                else:
                    # ä»ç±»å‹åˆ—è¡¨ä¸­æå–é»˜è®¤å€¼
                    if isinstance(param_type, str) and param_type.startswith('[') and param_type.endswith(']'):
                        # æå–åˆ—è¡¨ä¸­çš„é€‰é¡¹
                        options = re.findall(r'[\'"]([^\'"]+)[\'"]', param_type)
                        if options:
                            # ä½¿ç”¨åˆ—è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªé€‰é¡¹
                            param_list.append(f'{param_name}="{options[0]}"')
                        else:
                            # å¦‚æœåˆ—è¡¨è§£æå¤±è´¥ï¼Œä½¿ç”¨ç©ºå­—ç¬¦ä¸²
                            param_list.append(f'{param_name}=""')
                    else:
                        # å¯¹äºå…¶ä»–ç±»å‹ï¼Œä½¿ç”¨ç©ºå­—ç¬¦ä¸²ä½œä¸ºé»˜è®¤å€¼
                        param_list.append(f'{param_name}=""')
        
        # ç”Ÿæˆå‡½æ•°è°ƒç”¨
        var_name = f'var_{var_counter}'
        param_str = ", ".join(param_list)
        function_call = f'{var_name} = {func_name}({param_str})'
        function_calls.append(function_call)
        
        # è®°å½•è¾“å‡ºä¿¡æ¯ï¼ˆä»…å¤„ç†æœ‰è¾“å‡ºçš„å‡½æ•°ï¼‰
        output_types = func_info.get('output_types', {})
        if output_types:
            output_mapping[var_name] = output_types
            # æ›´æ–°æ¯ä¸ªè¾“å‡ºç±»å‹çš„æœ€æ–°å˜é‡
            for index, output_type in output_types.items():
                var_mapping[output_type] = var_name
        
        var_counter += 1
    
    # æ·»åŠ æœ€ç»ˆç»“æœè¡Œ
    function_calls.append(f'final_result = {var_mapping.get(function_list[-1], f"var_{var_counter-1}")}')
    
    return "\n".join(function_calls)

# ç¤ºä¾‹ç”¨æ³•
if __name__ == "__main__":
    # æŒ‡å®š YAML æ–‡ä»¶è·¯å¾„ï¼Œéœ€æ ¹æ®å®é™…æƒ…å†µä¿®æ”¹
    yaml_file_path = "merged.yaml"
    
    try:
        # è¯»å– YAML æ–‡ä»¶å†…å®¹
        with open(yaml_file_path, 'r', encoding='utf-8') as file:
            yaml_content = file.read()
    except FileNotFoundError:
        print(f"æœªæ‰¾åˆ° YAML æ–‡ä»¶: {yaml_file_path}")
    except Exception as e:
        print(f"è¯»å–æ–‡ä»¶æ—¶å‡ºé”™: {e}")
    else:
        
        # ç¤ºä¾‹å‡½æ•°åˆ—è¡¨
        function_list = [
            ['FluxProUltraImageNode', 'SaveImage'],
            ['CheckpointLoaderSimple', 'EmptyLatentImage', 'CLIPTextEncode', 'CLIPTextEncode', 'KSampler', 'VAEDecode', 'SaveImage'],
            ['CheckpointLoaderSimple', 'EmptyLatentImage', 'GLIGENLoader', 'CLIPTextEncode', 'CLIPTextEncode', 'GLIGENTextBoxApply', 'GLIGENTextBoxApply', 'KSampler', 'VAEDecode', 'SaveImage'],   
            ['EmptySD3LatentImage', 'QuadrupleCLIPLoader', 'VAELoader', 'UNETLoader', 'CLIPTextEncode', 'CLIPTextEncode', 'ModelSamplingSD3', 'KSampler', 'VAEDecode', 'SaveImage'],
            ['CheckpointLoaderSimple', 'EmptyLatentImage', 'CLIPTextEncode', 'CLIPTextEncode', 'KSampler', 'VAEDecode', 'SaveImage']
        ]
        # è§£æYAML
        yaml_data = parse_yaml(yaml_content)
        
        for func_list in function_list:
            # ç”Ÿæˆå‡½æ•°è°ƒç”¨
            result = generate_function_calls(func_list, yaml_data).strip()
            print(result)

            # è§£æDAG
            dag = parse_code_to_dag(result)
            print(dag)
            # æ‰“å°ç»“æœï¼ˆæ ¼å¼åŒ–è¾“å‡ºï¼‰
            print(json.dumps(dag, indent=2))
    
æ•´ä¸ªå·¥ä½œè¿˜æ˜¯å¾ˆè‡ªä¸Šè€Œä¸‹çš„ï¼Œå› ä¸ºæœ€ä¸‹å±‚å…¶å®å·²ç»å›ºå®šå¥½äº†ï¼›è¿™å°±æ˜¯ç›®å‰çš„å·¥ä½œæµç”Ÿæˆå·¥ä½œã€‚

ç°åœ¨çš„é—®é¢˜åœ¨äºè¦ä¿®æ”¹æ¶æ„ã€‚å¯¹ä¹‹å‰çš„ä¸€äº›å®šä¹‰åšå‡ºä¿®æ”¹ï¼Œä»¥æœåŠ¡äºæ–°çš„ç›®æ ‡ï¼Œä¸æ˜¯ç”Ÿæˆï¼Œè€Œæ˜¯ä¼˜åŒ–ï¼ˆå…¶å®ä¼˜åŒ–è‚¯å®šåŒ…æ‹¬ç”Ÿæˆï¼Œä¹‹å‰çš„ç”Ÿæˆæ˜¯0åˆ°1ï¼Œç°åœ¨æˆ‘ä»¬æ˜¯åœ¨1åˆ°100ï¼‰
æˆ‘ä»¬éœ€è¦è¾¾æˆçš„ç›®æ ‡æ˜¯ï¼šé’ˆå¯¹ä»»ä½•äººç±»ç¼–å†™çš„å·¥ä½œæµï¼Œå¯ä»¥å¤ç”¨é‡Œé¢çš„ä¼˜ç§€çš„æ¨¡å—ï¼Œæ¯”å¦‚æŸä¸ªå·¥ä½œæµå¾ˆå¥½çš„å®Œæˆäº†ç”Ÿæˆç²˜åœŸé£æ ¼çš„äººç‰©è‚–åƒï¼Œå¤ç”¨ä¹‹åå°±åº”è¯¥æ›´æ”¹æ–‡ä»¶åç§°å’Œä»»åŠ¡ç…§ç‰‡ï¼Œå†å»åšè¾“å‡º
ä¹Ÿå°±æ˜¯è¯´ï¼Œè¦å°†æŠ½å–å‡ºæ¥çš„å·¥ä½œæµä½œä¸ºä¸€ä¸ªâ€˜ç±»â€™çš„æ¦‚å¿µï¼ŒçœŸçš„è¦ç”¨çš„æ—¶å€™å†å»å®ä¾‹åŒ–æˆä¸€ä¸ªâ€˜å¯¹è±¡â€™ã€‚æˆ‘ä»¬åœ¨å‰é¢çš„æ¨¡å—å·¥ä½œæµçš„æ„å»ºå…¶å®å·²ç»å·®ä¸å¤šæ˜¯è‡ªåŠ¨æ„å»ºè¿™æ ·çš„â€˜å¯å¤ç”¨å·¥ä½œæµå•å…ƒâ€™äº†ï¼Œä¸å°±æ˜¯æ¨¡å—å·¥ä½œæµå˜›ï¼
è¿˜æœ‰å°±æ˜¯ï¼Œå¦‚æœæ˜¯ç±»ä¼¼åŠŸèƒ½ï¼Œå¯¹äºå®é™…çš„æ›´åŠ æ–°çš„æ¨¡å‹ï¼Œè¦å»æ›¿æ¢æ‰æ—§çš„æ¨¡å‹ï¼ŒæŸæŸsafetensorså•¥çš„ä¼šè¢«æ›¿æ¢æ‰ã€‚å…¶å®ä¹Ÿå¯ä»¥çœ‹ä½œæ˜¯ç”Ÿæˆä¸€ä¸ªç›¸åŒåŠŸèƒ½çš„æ¨¡å—å·¥ä½œæµ-å»æ›¿æ¢åŸæ¥é‚£ä¸ªæ—§çš„ã€‚åœ¨å·¥ä½œæµæ¡†æ¶å±‚å°±è¢«æ›¿æ¢äº†åå­—ç„¶åæ˜ å°„ä¸‹æ¥å°±æ˜¯æ–°çš„å·¥ä½œæµäº†ï¼›
é€šè¿‡è¿™äº›å¯¹â€˜ComfyUIå·¥ä½œæµä¼˜åŒ–â€™çš„æè¿°ä½ å…¶å®å¯ä»¥å‘ç°ï¼Œæœ€æ ¸å¿ƒçš„å…¶å®è¿˜æ˜¯åŸºäºç”Ÿæˆçš„é‚£ä¸€å¥—ï¼Œåªæ˜¯æ–°çš„æ¶æ„é€»è¾‘å’Œç›®æ ‡å˜äº†ä¸€äº›ï¼Œä¸€äº›æ¶æ„å…ƒç´ éœ€è¦æ›´åˆé€‚çš„å®šä¹‰ã€‚
ä»¥å‰æ˜¯éœ€æ±‚åˆ†è§£-å·¥ä½œæµæ¡†æ¶ç”Ÿæˆ-å¯æ‰§è¡Œå·¥ä½œæµç”Ÿæˆï¼›è¿™ä¸ªå¤§æ¶æ„ï¼Œé‚£äº›æ˜ å°„è¡¨éƒ½æ˜¯æœåŠ¡è¿™ä¸ªæµç¨‹çš„ï¼›
ç°åœ¨æ˜¯ä¸¤ä¸ªèµ·ç‚¹ï¼Œä»¥å‰è¯´å®è¯ï¼Œè‚¯å®šä¹Ÿæœ‰å¤„ç†ç¬¬ä¸‰æ–¹å·¥ä½œæµçš„æ¨¡å—ï¼Œä¸ç„¶é‚£äº›æ˜ å°„è¡¨çš„å†…å®¹æ˜¯å“ªé‡Œæ¥çš„å‘¢ï¼Ÿä½†è¿˜æ²¡æœ‰æŠŠå®ƒæå‡åˆ°æ¶æ„çš„æ•°æ®å…¥å£å±‚é¢ï¼Œå› ä¸ºåŸæ¥ä¸»è¦æ˜¯åšç”Ÿæˆã€‚ä½ æŠŠå®ƒâ€˜é¢„åˆ¶â€™å¥½ï¼ŒåŠ çƒ­å¯ä»¥ç”¨å°±è¡Œï¼›
ä½†ç°åœ¨ä¸åŒäº†ï¼Œè¦æŠŠå¯¹äºç¬¬ä¸‰æ–¹å·¥ä½œæµçš„ä½¿ç”¨æå‡åˆ°æ¶æ„çš„æ•°æ®å…¥å£çš„çº§åˆ«ä¸Šï¼Œå› ä¸ºä½ è¦åšæ›´ç²¾ç»†åŒ–çš„äº‹æƒ…ï¼Œå°±è¦æ‡‚å¾—å¦‚ä½•â€˜é¢„åˆ¶â€™äº†ã€‚ä»¥å‰æ˜¯éœ€æ±‚æ„å›¾å±‚å‘åŠ›ï¼Œç°åœ¨æ˜¯æœ€é¡¶å±‚çš„éœ€æ±‚å’Œæœ€åº•å±‚çš„å¯æ‰§è¡Œå·¥ä½œæµä¸€èµ·å‘åŠ›ï¼›
æ‰€ä»¥ç°åœ¨çš„æ¶æ„ä¸¤ä¸ªå…¥å£çš„é€»è¾‘å¦‚ä¸‹ï¼Œè¿˜æ˜¯åŸºäºä¹‹å‰çš„ä¸‰å±‚æ¶æ„çš„ï¼š
1.æ¥è‡ªç¬¬ä¸‰æ–¹çš„å¯æ‰§è¡Œå·¥ä½œæµæŠ½å–æ„å›¾ï¼Œå‡èšå‡ºå¯å¤ç”¨çš„å·¥ä½œæµå•å…ƒï¼ˆä¹Ÿæ˜¯ç±»ä¼¼äºæ¨¡å—å·¥ä½œæµï¼‰ï¼Œå½’ç±»æ›¿æ¢æˆä¹‹å‰æŸä¸ªåŠŸèƒ½çš„æœ€æ–°æ¨¡å‹ä½¿ç”¨ï¼Œä¹Ÿå°±æ˜¯è¦æŠŠç¬¬ä¸‰æ–¹çš„ï¼Œäººç±»ç¼–å†™çš„å·¥ä½œæµï¼Œæ¨¡å‹æ³¨å†Œåˆ°æ–°æ¶æ„çš„å„ä¸ªåˆ‡é¢ï¼›
2.è¿˜æ˜¯é€šè¿‡éœ€æ±‚å»ç”Ÿæˆï¼Œä¸åŒçš„æ˜¯ï¼Œå¯ä»¥æ˜¯å•çº¯éœ€æ±‚ç”Ÿæˆï¼Œå¯ä»¥æ˜¯éœ€æ±‚+å·¥ä½œæµã€‚å®ç°å¯¹äºå·¥ä½œæµçš„ä¿®æ”¹ç¼–è¾‘ä¼˜åŒ–ï¼Œè¿™ä¸€åˆ‡çš„äº¤æ±‡ç‚¹éƒ½åœ¨ç¬¬äºŒå±‚ï¼Œæ ¹æ®æ„å›¾å¯ä»¥åšâ€˜å·¥ä½œæµæ¡†æ¶ç”Ÿæˆä¿®æ”¹ä¼˜åŒ–ç¼–è¾‘â€™ã€‚

å¯¹äºæ–°çš„å·¥ä½œï¼Œå…³äºä¸€äº›å¯å¤ç”¨å•å…ƒï¼Œå·¥ä½œæµå¦‚ä½•ç”Ÿæˆï¼Œä»£ç çš„å±‚çº§å¦‚ä½•ç»„ç»‡å®‰æ’ï¼Œæ•´ä¸ªç›¸æ¯”äºåŸæ¥å¦‚ä½•æ›´åŠ ç³»ç»ŸåŒ–ã€‚
ä½ å¯ä»¥å‚è€ƒè¿™ä¸€ç¯‡æ–‡ç« æåˆ°çš„è§‚ç‚¹ï¼Œè¿™ç¯‡æ–‡ç« å¥½å•Šï¼Œå¾ˆå¤šåœ°æ–¹éƒ½è®²é€äº†ï¼Œéœ€è¦ä½ è®¤çœŸç†è§£ï¼ŒæŠŠé‡Œé¢çš„æ¦‚å¿µè¿ç§»åˆ°ç›®å‰çš„å·¥ä½œæµä¼˜åŒ–å·¥ä½œæ¥ã€‚
æ–‡ç« å¦‚ä¸‹,æˆ‘ç”¨<<<>>>åŒ…è£¹ã€‚

<<<åªè¦åº•å±‚ä»£ç æ˜¯AIå†™çš„ï¼Œé‚£ä¹ˆè½¯ä»¶å·¥ç¨‹çš„èŒƒå¼å¿…å®šè¦å‘ç”Ÿå˜åŒ–

Warning: è¿™æ˜¯ä¸€ä¸ªæ‰¯æ·¡è´´ï¼Œæˆ‘è‡ªå·±éƒ½æ²¡æŠŠç»†èŠ‚æƒ³æ¸…æ¥šï¼Œçº¯æ¢è®¨ï¼Œçº¯æ‰¯æ·¡ã€‚

æˆ‘ä»¬æ­£åœ¨è¿›å…¥ä¸‹ä¸€ä¸ªè½¯ä»¶å·¥ç¨‹çš„èŒƒå¼ï¼šç”Ÿæ€åŒ–ï¼ˆæ²¡é”™ï¼Œå°±æ˜¯é‚£ä¸ª eco-systemï¼Œç”ŸåŒ–ç¯æé‡Œçš„â€œç”Ÿâ€ï¼Œç”Ÿç‰©è¿™ä¸ªå­¦ç§‘é‡Œä¼šæ¶‰åŠçš„ç”Ÿæ€ï¼‰ã€‚

å…³é”®åœ¨äºAIå†™å‡ºæ¥çš„ä»£ç ä½ æ€ä¹ˆå®šä½

è¿‡å»å‡ å¹´ï¼Œç¨‹åºå‘˜ç¾¤ä½“å›´ç»•ç€â€œAI ä¼šä¸ä¼šæ›¿ä»£ç¨‹åºå‘˜â€è¿™ä¸ªè¯é¢˜åµäº†æ— æ•°æ¬¡ï¼Œäº’ç›¸æ‹‰é»‘ã€äº’ç›¸å¼€å–·ã€‚ä½†åœ¨æˆ‘çœ‹æ¥ï¼Œè¿™äº›äº‰è®ºéƒ½ç™½è´¹äº†ï¼Œå› ä¸ºæ ¹æœ¬é—®é¢˜ä¸€å¼€å§‹å°±é—®é”™äº†ã€‚çœŸæ­£çš„å…³é”®ä¸æ˜¯â€œAI æ›¿ä»£ä¸å¦â€ï¼Œè€Œæ˜¯ï¼šä½ ç©¶ç«Ÿå¦‚ä½•å®šä½ AI å†™å‡ºæ¥çš„ä»£ç ï¼Ÿ

æœ‰äººå¯èƒ½è§‰å¾—å¥‡æ€ªï¼šAI å†™çš„ä»£ç ï¼Œä¸å°±æ˜¯ä»£ç å—ï¼Ÿè¿˜èƒ½æ˜¯ä»€ä¹ˆï¼Ÿå¯ä½ å›æƒ³ä¸€ä¸‹å¤§å­¦é‡Œçš„â€œè½¯ä»¶å·¥ç¨‹â€è¿™é—¨è¯¾ï¼Œé‚£çœŸçš„æ˜¯â€œå†™ä»£ç è¯¾â€å—ï¼Ÿå½“ç„¶ä¸æ˜¯ã€‚è½¯ä»¶å·¥ç¨‹è®²çš„æ˜¯ä¸€ä¸ªå¤šå±‚æ¬¡çš„å·¥ç¨‹ä½“ç³»ï¼Œè€Œä¸åªæ˜¯å•çº¯çš„ä»£ç å®ç°ã€‚Layers!

æ‰€ä»¥åœ¨æˆ‘çœ‹æ¥ï¼ŒAI å†™çš„ä»£ç ä¸èƒ½è¢«å½“æˆç¨³å®šçš„â€œäº§å“â€ï¼Œè€Œåº”è¯¥è¢«ç†è§£ä¸ºä¸€ç§ç†µæºã€‚å¤§æ¨¡å‹çš„æœ¬è´¨å†³å®šäº†å®ƒçš„è¾“å‡ºè™½ç„¶æç«¯é«˜æ•ˆï¼Œä½†å¹¶ä¸æ˜¯ä½ç†µçš„ç»ˆæ€ï¼Œè€Œæ˜¯é«˜ç†µçš„è¾“å…¥ã€‚å®ƒçš„ç‰¹ç‚¹éå¸¸é²œæ˜ï¼šæ•°é‡å¤šï¼Œå¯ä»¥ç¬é—´äº§å‡ºæµ·é‡å®ç°ï¼›è´¨é‡æ‚ï¼Œæ­£ç¡®ä¸é”™è¯¯å¹¶å­˜ï¼Œå·®å¼‚å·¨å¤§ï¼›é‡å¤æ€§é«˜ï¼Œå¸¸å¸¸ç”Ÿæˆç±»ä¼¼åŠŸèƒ½çš„å¤šç‰ˆæœ¬ã€‚è¿™äº›ç‰¹å¾æ„å‘³ç€ï¼ŒAI è¾“å‡ºçš„ä»£ç æ›´åƒæ˜¯ç”Ÿç‰©è¿›åŒ–ä¸­çš„â€œåŸºå› çªå˜â€â€”â€”æä¾›ä¸°å¯Œçš„å¤šæ ·æ€§ï¼Œä½†éœ€è¦ç»è¿‡ç­›é€‰ã€å‹ç¼©å’Œæ¼”åŒ–ï¼Œæ‰èƒ½æ²‰æ·€ä¸ºç¨³å®šçš„ç»“æ„ã€‚(è™½ç„¶ä½ç«¯ç å†œç°åœ¨å·²ç»ç¡®å®šè¦è¢«æ·˜æ±°ï¼Œä½†æ˜¯ä½ ä¸èƒ½ç¡¬æ‰¯è¯´ä½ç«¯ç å†œå†™å‡ºæ¥çš„ä»£ç ä¹Ÿä¸ä¸€å®šå…¨é«˜è´¨é‡ï¼Œè¿™ä¸ªæˆ‘ä»¬åé¢å†è¯´ï¼Œä¸æ˜¯çº ç»“è¿™ä¸ªé—®é¢˜çš„äº‹ï¼‰ã€‚

AIç”Ÿæˆä»£ç å°†æˆ‘ä»¬æŠŠè½¯ä»¶å·¥ç¨‹çš„èŒƒå¼è¿›ç¨‹åˆå¾€å‰äº†ä¸€æ­¥

å¦‚æœæˆ‘æ¢ä¸ªè§†è§’ï¼ŒæŠŠ AI ç”Ÿæˆçš„ä»£ç çœ‹æˆä¸€ç§â€œç†µæºâ€ï¼Œé‚£ä¹ˆå®ƒçš„æ„ä¹‰å°±ä¸å†æ˜¯æœ€ç»ˆäº§å“ï¼Œè€Œæ˜¯ç‡ƒæ–™ã€‚è¿™äº›é«˜ç†µè¾“å‡ºï¼Œå¿…é¡»ç»è¿‡åè®®çº¦æŸã€åé¦ˆç­›é€‰å’Œæ²»ç†æœºåˆ¶çš„æ§ç†µå¤„ç†ï¼Œæ‰èƒ½é€æ¸è¢«å‹ç¼©ä¸ºä½ç†µçš„â€œç»“æ„â€ï¼Œæœ€ç»ˆæ²‰æ·€ä¸ºæ–‡æ˜çº§çš„ç”Ÿæ€èµ„äº§ã€‚äºæ˜¯ï¼Œæ•´ä¸ªé¡¹ç›®çš„é€»è¾‘ï¼Œå°±ä¸å†æ˜¯å•ç‚¹å¼€å‘ï¼Œè€Œæ˜¯ä¸€æ¬¡ç”Ÿæ€æ¼”åŒ–ã€‚æ‰€ä»¥è¯»è¿™ç¯‡å¸–å­æ—¶ï¼Œè¯·ä¸è¦æŠŠè‡ªå·±ä»…ä»…å½“æˆç¨‹åºå‘˜ï¼Œè€Œè¦å…ˆæŠŠè‡ªå·±å½“æˆä¸€ä¸ªç”Ÿæ€è®¾è®¡è€…ã€‚åœ¨ä¸Šä¸–çºª 80 å¹´ä»£ï¼Œç¾å›½æœ‰ä¸€ä¸ªè‘—åçš„å®éªŒå«â€œç”Ÿæ€ç®±â€ï¼ˆBiosphereï¼‰ï¼Œå®ƒæ˜¯ä¸€ä¸ªå®Œå…¨å°é—­çš„ç‹¬ç«‹ç”Ÿæ€ç³»ç»Ÿï¼Œæ¨¡æ‹Ÿæ ¸å¤§æˆ˜åçš„æ±‚ç”Ÿä»“æˆ–æ˜Ÿé™…èˆªè¡Œåœºæ™¯ã€‚å¾ˆæœ‰æ„æ€çš„æ˜¯ï¼Œå®ƒçš„ç¬¬äºŒä»»æ€»ç»ç†è¿˜æ˜¯å²è’‚å¤«Â·ç­å†œã€‚

è¿™ç¯‡å¸–å­æˆ‘ä»¬è¦æ¢è®¨çš„ï¼Œæ­£æ˜¯AI æ—¶ä»£çš„è½¯ä»¶å·¥ç¨‹èŒƒå¼å˜åŒ–ï¼Œå…¶æ ¸å¿ƒæ¦‚å¿µå°±æ˜¯ç»“æ„æ± ï¼ˆStructure Poolï¼‰ä¸ç”Ÿæ€æ¼”åŒ–çš„è¿è¡Œé€»è¾‘ã€‚å›é¡¾è½¯ä»¶å·¥ç¨‹çš„å‘å±•è½¨è¿¹ï¼Œæœ€æ—©çš„æ—§èŒƒå¼ï¼ˆå°é—­/æµæ°´çº¿ï¼‰æŠŠå¼€å‘è¿‡ç¨‹å½“æˆå·¥å‚åŒ–çš„æµæ°´çº¿ï¼šéœ€æ±‚ â†’ è®¾è®¡ â†’ å¼€å‘ â†’ æµ‹è¯• â†’ éƒ¨ç½²ã€‚å®ƒå¼ºè°ƒç¨³å®šå’Œå¯æ§ï¼Œæœ¬è´¨ä¸Šæ˜¯é€šè¿‡å‹åˆ¶ç†µæ¥ç»´æŒç§©åºã€‚åæ¥å‡ºç°äº†è¿‡æ¸¡èŒƒå¼ï¼ˆæ•æ·/Agileï¼‰ï¼Œæ‰¿è®¤éœ€æ±‚éšæ—¶å¯èƒ½å˜åŒ–ï¼Œå¼•å…¥å±€éƒ¨æ¼”åŒ–å’Œè¿­ä»£ï¼Œä½†ä»ç„¶å±€é™äºé¡¹ç›®å†…çš„å°é—­ç¯ã€‚è¿™æ˜¯ä»â€œå‹åˆ¶ç†µâ€èµ°å‘â€œåˆ©ç”¨ç†µâ€çš„ç¬¬ä¸€æ­¥ã€‚å¦‚ä»Šï¼Œæˆ‘ä»¬æ­£èµ°å‘æ–°èŒƒå¼ï¼ˆAI + å¼€æ”¾ç»“æ„æ± ï¼‰ï¼šè½¯ä»¶å¼€å‘å˜æˆäº†ä¸€ä¸ªç”Ÿæ€ï¼ŒAI ç”Ÿæˆã€ç”¨æˆ·åé¦ˆå’Œå¼€å‘è€…çº¦æŸå…±åŒä½œç”¨äºå…¬å…±ç»“æ„æ± ï¼Œæ¨åŠ¨ç³»ç»Ÿä¸æ–­æ¼”åŒ–ã€‚åœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼Œäº¤ä»˜ä¸å†æ˜¯ä¸€æ¬¡æ€§äº§å“ï¼Œè€Œæ˜¯è´¡çŒ®ç»“æ„å•å…ƒï¼Œæ²‰æ·€åˆ°æ± å­é‡Œå¤ç”¨å’Œæ¼”åŒ–ã€‚å·¥ç¨‹é€»è¾‘å› æ­¤å‘ç”Ÿæ ¹æœ¬è½¬å˜ï¼šä»â€œå‹åˆ¶ç†µâ€èµ°å‘â€œåˆ©ç”¨ç†µâ€ï¼Œæœ€ç»ˆè¿›å…¥ç”Ÿæ€å­¦çš„æ€ç»´æ¨¡å¼ã€‚

å†æŠ½è±¡ä¸€å±‚ï¼šå°é—­ â†’ å¼€æ”¾ã€é™æ€è®¾è®¡ â†’ åŠ¨æ€æ¼”åŒ–æœ¬æ¥å°±æ˜¯å·¥ç¨‹å­¦æ•´ä½“çš„å†å²é€»è¾‘ã€‚

åœ¨æ—©æœŸçš„å·¥ç¨‹æ—¶ä»£ï¼Œé€»è¾‘æ˜¯å°é—­ç³»ç»Ÿ + é™æ€è®¾è®¡ã€‚å·¥ç¨‹å¸ˆåƒâ€œé€ ç‰©ä¸»â€ï¼Œè¯•å›¾åœ¨è®¾è®¡é˜¶æ®µå°±æŠŠå¤æ‚æ€§å…¨éƒ¨å‹ç¼©æ‰ï¼Œä»¥æ­¤æ¢å–é«˜ç¨³å®šæ€§ï¼Œä½†ä»£ä»·æ˜¯é€‚åº”æ€§æå·®ã€‚è¿›å…¥å·¥ä¸šå·¥ç¨‹é˜¶æ®µï¼Œæ‰é€æ¸å‡ºç°äº†å±€éƒ¨å¼€æ”¾ã€‚ç¦ç‰¹å¼çš„æµæ°´çº¿æŠŠå¤æ‚åˆ¶é€ æ‹†è§£æˆå¯æ§ç¯èŠ‚ï¼Œè™½ç„¶æ•´ä½“ä¾ç„¶æ˜¯å°é—­ç³»ç»Ÿï¼Œå´å¼€å§‹å…è®¸å±€éƒ¨çš„æ¨¡å—æ›¿æ¢ã€‚åŒæ—¶ï¼Œç”µæ°”åŒ–ä¸æ ‡å‡†åŒ–ï¼ˆèºä¸ã€æ¥å£ã€ç”µç½‘æ ‡å‡†ï¼‰çš„å‡ºç°ï¼Œè®©ä¸åŒå‚å•†ã€ä¸åŒç³»ç»Ÿä¹‹é—´èƒ½å¤Ÿé¦–æ¬¡ç»„åˆã€‚è¿™ç›¸å½“äºå·¥ç¨‹è¿›å…¥äº†ç»“æ„åŒ–é˜¶æ®µï¼Œä½†ä»åå‘å°é—­ã€‚

æ‰€ä»¥ï¼Œåƒä¸‡ä¸è¦æŠŠçœ¼å…‰åªç›¯åœ¨è‡ªå·±çš„ä¸€äº©ä¸‰åˆ†ç”°ï¼Œä»æ¯•ä¸šåˆ°ç°åœ¨åªçœ‹åˆ°çœ¼å‰çš„å±å¹•å’Œ IDEã€‚å·¥ç¨‹çš„æ ¼å±€è¦æŠ¬é«˜æ¥çœ‹ï¼Œå¦åˆ™æ ¹æœ¬çœ‹ä¸æ¸…æ¥šå†å²çš„é€»è¾‘ã€‚

åœ¨è½¯ä»¶å·¥ç¨‹ä¸­ï¼Œä¼ ç»ŸèŒƒå¼å¦‚ç€‘å¸ƒæ¨¡å‹ã€V æ¨¡å‹ï¼Œæœ¬è´¨è¿˜æ˜¯â€œå°é—­è®¾è®¡â€”ä¸€æ¬¡æ€§äº¤ä»˜â€ã€‚éšåå‡ºç°çš„Agile(æ‰€è°“çš„æ•æ·/DevOpsï¼‰æ‰“ç ´äº†å¤§å‘¨æœŸï¼Œå¼ºè°ƒè¿­ä»£ä¸åé¦ˆï¼Œè¿ˆå‘äº†â€œåŠ¨æ€æ¼”åŒ–â€ã€‚å†åæ¥ï¼Œå¼€æºè¿åŠ¨é€šè¿‡å¼€æ”¾æºä»£ç ï¼Œè®©å¤–éƒ¨è´¡çŒ®è¿›å…¥ç³»ç»Ÿï¼Œè½¯ä»¶ç¬¬ä¸€æ¬¡å‡ºç°äº†â€œç”Ÿæ€æ¼”åŒ–â€çš„æ¨¡å¼ã€‚

ç”±æ­¤ï¼Œå·¥ç¨‹æ€ç»´é€æ¸è½¬å˜ï¼šå¼€å§‹æ¥å—ä¸ç¡®å®šæ€§ï¼Œç”¨åé¦ˆé©±åŠ¨ä¼˜åŒ–ã€‚æ•´æ¡å†å²é€»è¾‘æ¸…æ™°å¯è§ï¼šä»å°é—­åˆ°å¼€æ”¾ï¼Œä»é™æ€è®¾è®¡åˆ°åŠ¨æ€æ¼”åŒ–ã€‚æ—©æœŸå·¥ç¨‹é â€œå‹åˆ¶ç†µâ€ç»´æŒç§©åºï¼Œè€Œä»Šå¤©æˆ‘ä»¬é â€œåˆ©ç”¨ç†µâ€æ¥æ¿€å‘æ¼”åŒ–ã€‚AI çš„åˆ°æ¥ï¼Œåªæ˜¯æŠŠè¿™ä¸€é•¿æœŸè¶‹åŠ¿æ¨åˆ°æè‡´ï¼Œè®©å·¥ç¨‹å½»åº•è¿›å…¥ç”Ÿæ€å­¦é€»è¾‘ã€‚

åœ¨æˆ‘è°ˆå‘å±•æ–¹å‘çš„æ—¶å€™ï¼Œå»ºè®®å…ˆçœ‹çœ‹æˆ‘å‰å‡ å¤©å†™çš„ä¸¤ç¯‡å…³äºâ€œå®¹å™¨ä¸åè®®â€çš„å¸–å­â€”â€”é‚£ä¸¤ç¯‡æŠŠæˆ‘ç°åœ¨æƒ³è¡¨è¾¾çš„æŠ€æœ¯éª¨æ¶è®²å¾—æ¯”è¾ƒæ¸…æ¥šã€‚è¦è¯´æ˜çš„æ˜¯ï¼Œè¿™ä¸ªè§‚ç‚¹å¹¶éæˆ‘å‡­ç©ºæƒ³å‡ºæ¥ï¼šæˆ‘çš„æ€è€ƒæ¥è‡ªä¸ä¸åŒèƒŒæ™¯å¼€å‘è€…çš„åå¤äº¤æµï¼Œå¾ˆå¤šæƒ³æ³•æ˜¯åœ¨ç¢°æ’ä¸­é€æ­¥æˆå½¢çš„ã€‚ç„¶è€Œç°åœ¨çœŸæ­£çš„éš¾ç‚¹åœ¨äºï¼Œæˆ‘ä»¬æ­£åœ¨æ¢ç´¢ä¸€ä¸ªå°šæœªè¢«å‘½åçš„æœªçŸ¥é¢†åŸŸï¼›å¾ˆå¤šæ¦‚å¿µçš„æœ¯è¯­è¿˜æ²¡è¢«å‘æ˜å‡ºæ¥ï¼Œå¯¼è‡´å¸¸å¸¸å‡ºç°â€œè¯´åŠå¤©ã€å´äº’ä¸ç›¸é€šâ€çš„çŠ¶å†µâ€”â€”çœ‹èµ·æ¥åƒæ˜¯åœ¨é¸¡åŒé¸­è®²ï¼Œä½†å®é™…ä¸Šå¤§å®¶å¯èƒ½åœ¨è°ˆåŒä¸€ä¸ªæŠ½è±¡æ€è·¯ã€‚ç”šè‡³æˆ‘ä»¬è‡ªå·±éƒ½ä¸ç¡®å®šå½¼æ­¤è®¨è®ºçš„æœ¬è´¨æ˜¯å¦ä¸€è‡´ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆåœ¨è®¨è®ºåŒä¸€ä¸ªæŠ½è±¡æ¦‚å¿µæ—¶ï¼Œè¿˜ä¼šäº§ç”Ÿäº‰æ‰§ã€‚è¯­è¨€æœ¬èº«å°±æ˜¯äººç±»ç†è§£ä¸–ç•Œçš„è¾¹ç•Œï¼›åœ¨é¢å¯¹å…¨æ–°çš„æ¦‚å¿µæ—¶ï¼Œå»æ‹“å±•è¯­è¨€ã€å»è¾¾æˆå…±è¯†ï¼Œæ¯”ç™»å¤©è¿˜éš¾â€”â€”æˆ‘äº²èº«ä½“éªŒè¿‡è¿™ç§æŒ«è´¥æ„Ÿã€‚æ‰“ä¸ªæ¯”æ–¹ï¼šæˆ‘ä»æ²¡ä½è¿‡å®«æ®¿ï¼Œå´åœ¨æƒ³è±¡åœ¨åšæ¢¦çš„æ—¶å€™è‡ªå·±å½“å…¬ä¸»ï¼›ç„¶è€Œåœ¨æ¢¦é‡Œä¸­æˆ‘ä»åœ¨è‡ªå®¶æ‰¾å•æ‰€ï¼Œè¿™ç§é”™ä½æ­£æ˜¯æˆ‘ä»¬åœ¨ç”¨ç°æœ‰è¯­è¨€æè¿°æœªæ¥èŒƒå¼æ—¶ç»å¸¸é‡åˆ°çš„å°´å°¬ã€‚

è®¡ç®—æœºä¸–ç•Œçš„è¶‹åŠ¿ï¼šä»å®¹å™¨åˆ°åè®®

https://x.com/feltanimalworld/status/1968665345352171645

æˆ‘çš„æ„æ€ä¸æ˜¯è¦å½»åº•é¢ è¦†â€œå®¹å™¨â€ï¼Œè€Œæ˜¯ç°åœ¨æœ‰å¤§é‡çš„åè®®çœŸç©º

https://x.com/feltanimalworld/status/1968790289629282440

æˆ‘çš„æƒ³æ³•ï¼šç”Ÿæ€è®¾è®¡ï¼Œå°†é¡¹ç›®å˜æˆä¸€ä¸ªâ€œç»“æ„æ± å­â€ã€‚

åœ¨ AI é©±åŠ¨çš„æ–°èŒƒå¼ä¸‹ï¼Œè½¯ä»¶å·¥ç¨‹æ­£åœ¨ä»å°é—­çš„æµæ°´çº¿é€»è¾‘è½¬å‘ç”Ÿæ€åŒ–é€»è¾‘ã€‚è¿‡å»çš„è½¯ä»¶å¼€å‘åƒå·¥å‚ä¸€æ ·ï¼Œéµå¾ªéœ€æ±‚â€”è®¾è®¡â€”å¼€å‘â€”æµ‹è¯•â€”éƒ¨ç½²çš„çº¿æ€§æµç¨‹ï¼Œå¼ºè°ƒç¨³å®šä¸å¯æ§ï¼Œæœ¬è´¨ä¸Šæ˜¯é€šè¿‡â€œå‹åˆ¶ç†µâ€æ¥ç»´æŒç§©åºã€‚è€Œåœ¨æ–°çš„èŒƒå¼ä¸­ï¼Œå¼€å‘è¢«çœ‹ä½œä¸€ä¸ªå¼€æ”¾çš„ç”Ÿæ€ç³»ç»Ÿï¼šAIã€å¼€å‘è€…ä¸ç”¨æˆ·å…±åŒå‚ä¸ï¼Œä»£ç ä¸ç»“æ„ä¸æ–­ç”Ÿæˆã€éªŒè¯ã€æ·˜æ±°å’Œè¿›åŒ–ã€‚è¿™æ„å‘³ç€è½¯ä»¶å·¥ç¨‹çš„é‡å¿ƒä»ä¸€æ¬¡æ€§äº¤ä»˜è½¬å‘æŒç»­æ¼”åŒ–ï¼Œä»å•ä¸€äº§å“è½¬å‘ç»“æ„å•å…ƒï¼Œä»å·¥å‚æ€ç»´è½¬å‘ç”Ÿæ€æ€ç»´ã€‚

åœ¨è¿™ä¸€ç”Ÿæ€åŒ–æ¡†æ¶ä¸­ï¼Œç»“æ„æ± å­ï¼ˆStructure Poolï¼‰æ˜¯æ ¸å¿ƒæœºåˆ¶ã€‚å®ƒæ˜¯ä¸€ä¸ªå…¬å…±æ± ï¼Œå­˜æ”¾ AIã€äººç±»å’Œç”¨æˆ·è´¡çŒ®çš„å„ç§â€œç»“æ„å•å…ƒâ€ï¼ˆå®¹å™¨ã€è§„åˆ™ã€æœåŠ¡ã€åè®®ï¼‰ã€‚æ–°ç”Ÿæˆçš„ç»“æ„å•å…ƒåœ¨é€šè¿‡åè®®éªŒè¯åæ²‰æ·€åˆ°æ± å­é‡Œï¼Œæˆä¸ºå¯è°ƒç”¨ã€å¯ç»„åˆçš„èµ„äº§ï¼Œå¹¶åœ¨æŒç»­åé¦ˆä¸é€‰æ‹©å‹åŠ›ä¸­ä¸æ–­å‡çº§æˆ–è¢«æ·˜æ±°ã€‚ç»“æ„æ± ä¸æ˜¯ä¸€ä¸ªé™æ€ä»“åº“ï¼Œè€Œæ˜¯ä¸€ä¸ªåŠ¨æ€ç”Ÿæ€ï¼Œå®ƒåˆ†ä¸ºå¤šä¸ªå±‚æ¬¡ï¼šæ‰§è¡Œå±‚ä¿è¯å®¹å™¨èƒ½è¿è¡Œï¼Œåè®®å±‚ä¿è¯å®¹å™¨èƒ½äº’è”ï¼Œæ²»ç†å±‚ç»´æŒæ± å­å¥åº·ï¼Œæ¼”åŒ–å±‚æ¨åŠ¨åè®®å‡çº§ï¼Œè€Œæ–‡æ˜å±‚åˆ™è®©å…¶æˆä¸ºäººæœºå…±ç”¨çš„çŸ¥è¯†ä¸è§„åˆ™åŸºå»ºã€‚

æ•´ä¸ªç”Ÿæ€çš„è¿è¡Œä¾èµ–ä¸€ä¸ªå®¹å™¨â€”åè®®â€”åé¦ˆâ€”æ²»ç†çš„é—­ç¯ï¼šAI æˆ–å¼€å‘è€…ç”Ÿæˆæ–°å®¹å™¨ï¼Œç»åè®®è§„åˆ™éªŒè¯åè¿›å…¥ç»“æ„æ± ï¼Œé™„å¸¦å…ƒæ•°æ®ä¸ç‰ˆæœ¬ï¼Œéšååœ¨è°ƒåº¦ä¸­è¢«è°ƒç”¨ã€‚ä½¿ç”¨è¿‡ç¨‹äº§ç”Ÿçš„åé¦ˆæˆä¸ºé€‚åº”åº¦ä¿¡å·ï¼Œå†³å®šå“ªäº›å•å…ƒå‡çº§ã€å“ªäº›æ·˜æ±°ï¼Œè€Œåè®®ä¹Ÿä¼šéšç”Ÿæ€æ‰©å¤§ä¸æ–­è¿›åŒ–ã€‚å…¶æœ¬è´¨ï¼Œå°±æ˜¯æŠŠ AI çš„é«˜ç†µè¾“å‡ºé€šè¿‡æ§ç†µæœºåˆ¶å‹ç¼©ä¸ºä½ç†µç»“æ„èµ„äº§ã€‚

åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œå‡ æ¡å¿ƒæ³•è‡³å…³é‡è¦ï¼šAI ä»£ç åº”è¢«è§†ä¸ºç†µæºï¼Œæ˜¯ç”Ÿæ€ç‡ƒæ–™è€Œéç»ˆæ€äº§å“ï¼›åè®®æ˜¯è¾¹ç•Œï¼Œç¡®ä¿ä¸åŒå®¹å™¨èƒ½å¯¹æ¥å¹¶è¿‡æ»¤åƒåœ¾ï¼›åé¦ˆæ˜¯é©±åŠ¨åŠ›ï¼Œå†³å®šå­˜æ´»ä¸æ·˜æ±°ï¼›é€‰æ‹©å‹åŠ›æä¾›æ–¹å‘ï¼Œé¿å…æ¼”åŒ–å¤±åºï¼›æ¼”åŒ–åˆ™æ˜¯å¸¸æ€ï¼Œè½¯ä»¶ä¸å†æ˜¯ä¸€æ¬¡æ€§äº¤ä»˜ï¼Œè€Œæ˜¯ä¸€ä¸ªæŒç»­è¿›åŒ–çš„ç”Ÿå‘½ç³»ç»Ÿã€‚

ä»æ–‡æ˜æ„ä¹‰ä¸Šçœ‹ï¼Œè½¯ä»¶å·¥ç¨‹å·²ç»æ²¿ç€ä¸€æ¡æ¸…æ™°çš„å†å²è½¨è¿¹æ¼”åŒ–ï¼šä»å°é—­åˆ°å¼€æ”¾ï¼Œä»é™æ€è®¾è®¡åˆ°åŠ¨æ€æ¼”åŒ–ã€‚ç»“æ„æ± å­æ­£åœ¨æˆä¸ºäººæœºå…±å»ºçš„â€œæ–‡æ˜è®°å¿†ä½“â€ï¼Œå…¶ä¸­æ²‰æ·€çš„ä¸ä»…æ˜¯ä»£ç ï¼Œè¿˜æœ‰è§„åˆ™ã€çŸ¥è¯†å’Œåè®®ã€‚AI çš„å•†ç”¨åŒ–åˆ™æŠŠè¿™ä¸€è¶‹åŠ¿æ¨åˆ°æè‡´ï¼Œè®©å·¥ç¨‹å½»åº•è¿›å…¥ç”Ÿæ€å­¦é€»è¾‘ï¼šä¸å†å‹åˆ¶ç†µï¼Œè€Œæ˜¯åˆ©ç”¨ç†µæ¥æ¿€å‘æ¼”åŒ–ã€‚

AI èŒƒå¼ä¸‹çš„è½¯ä»¶å·¥ç¨‹ = ç”Ÿæ€åŒ–è®¾è®¡å¼€å‘ â†’ ä»¥ç»“æ„æ± ä¸ºæ ¸å¿ƒ â†’ é€šè¿‡æŒç»­æ¼”åŒ–å®ç°æ–‡æ˜çº§çš„æ§ç†µä¸ç§¯ç´¯ã€‚

å…³é”®è¯ï¼š

ç”Ÿæ€åŒ–å¼€å‘ â€”â€” è½¯ä»¶å·¥ç¨‹ä¸å†æ˜¯æµæ°´çº¿ï¼Œè€Œæ˜¯å¼€æ”¾ç”Ÿæ€ã€‚

ç»“æ„æ± ï¼ˆStructure Poolï¼‰ â€”â€” å­˜æ”¾ã€è°ƒåº¦ã€æ¼”åŒ–çš„å…¬å…±æ± å­ã€‚

ç†µæº â€”â€” AI ä»£ç æ˜¯é«˜ç†µè¾“å…¥ï¼Œæ˜¯ç”Ÿæ€ç‡ƒæ–™è€Œä¸æ˜¯ç»ˆæ€äº§å“ã€‚

æ§ç†µæœºåˆ¶ â€”â€” åè®®ã€åé¦ˆã€æ²»ç†ï¼ŒæŠŠé«˜ç†µè½¬åŒ–ä¸ºä½ç†µç»“æ„ã€‚

æŒç»­æ¼”åŒ– â€”â€” è½¯ä»¶ä¸å†ä¸€æ¬¡æ€§äº¤ä»˜ï¼Œè€Œæ˜¯åŠ¨æ€è¿›åŒ–çš„ç”Ÿå‘½ç³»ç»Ÿã€‚

åè®®è¾¹ç•Œ â€”â€” ç¡®ä¿äº’æ“ä½œã€è¿‡æ»¤åƒåœ¾ã€ç»´æŒç§©åºã€‚

æ–‡æ˜è®°å¿†ä½“ â€”â€” ç»“æ„æ± æ²‰æ·€çš„ä¸åªæ˜¯ä»£ç ï¼Œè€Œæ˜¯äººæœºå…±å»ºçš„çŸ¥è¯†ä¸è§„åˆ™ã€‚

ç¤ºä¾‹ï¼šè¯­è¨€ç¿»è¯‘çš„ç»“æ„æ± å­ï¼ˆTranslation Structure Poolï¼‰
1. æ‰§è¡Œå±‚ï¼ˆå®¹å™¨å•å…ƒï¼‰

åœ¨è¿™ä¸ªç»“æ„æ± é‡Œï¼Œæœ‰è®¸å¤šä¸åŒçš„ç¿»è¯‘å®¹å™¨ï¼š

å®¹å™¨ Aï¼šä¸­ â†’ è‹±ï¼Œåç›´è¯‘
å®¹å™¨ Bï¼šä¸­ â†’ è‹±ï¼Œåæ„è¯‘
å®¹å™¨ Cï¼šè‹± â†’ æ—¥ï¼Œé€‚åˆæ–°é—»
å®¹å™¨ Dï¼šè‹± â†’ æ³•ï¼Œæ³•å¾‹æ–‡æ¡£ä¼˜åŒ–
å®¹å™¨ Eï¼šå¤šè¯­è¨€å°å¥å®æ—¶ç¿»è¯‘ï¼ˆå¯¹è¯åœºæ™¯ï¼‰
ğŸ‘‰ æ¯ä¸ªå®¹å™¨å°±æ˜¯ä¸€ä¸ªâ€œå¯è¿è¡Œçš„ç¿»è¯‘æ¨¡å—â€ã€‚

2. åè®®å±‚ï¼ˆè¾¹ç•Œä¸æ¥å£ï¼‰
æ‰€æœ‰ç¿»è¯‘å®¹å™¨éƒ½å¿…é¡»ç¬¦åˆä¸€ä¸ªåè®®ï¼Œä¾‹å¦‚ï¼š

{
  "input_text": "string",
  "source_lang": "string",
  "target_lang": "string",
  "metadata": { "domain": "general|legal|news" },
  "output_text": "string"
}

ğŸ‘‰ åè®®ä¿è¯äº†ï¼šæ— è®ºå†…éƒ¨ç®—æ³•æ€ä¹ˆå®ç°ï¼Œå¤–éƒ¨éƒ½èƒ½ç”¨ç»Ÿä¸€æ–¹å¼è°ƒç”¨ã€‚

3. æ²»ç†å±‚ï¼ˆéªŒè¯ä¸ç­›é€‰ï¼‰

éªŒè¯ï¼šæ–°å®¹å™¨åŠ å…¥æ—¶ï¼Œå…ˆè·‘æµ‹è¯•é›†ï¼ˆBLEU åˆ†æ•°ã€å»¶è¿Ÿã€é”™è¯¯ç‡ï¼‰ã€‚
æ·˜æ±°ï¼šé”™è¯¯ç‡è¿‡é«˜æˆ–ä¸ç¬¦åˆåè®®çš„å®¹å™¨ä¼šè¢«ä¸‹æ¶ã€‚
åˆ†å±‚ï¼šé€šè¿‡åé¦ˆå’Œæµ‹è¯•ï¼Œå®¹å™¨ä¼šè¢«æ ‡è®°ä¸º bronze / silver / gold çº§åˆ«ã€‚
ğŸ‘‰ è¿™æ ·é¿å…äº†â€œåƒåœ¾ç¿»è¯‘â€æ±¡æŸ“ç»“æ„æ± ã€‚

4. æ¼”åŒ–å±‚ï¼ˆåé¦ˆä¸å‡çº§ï¼‰
åé¦ˆé‡‡é›†ï¼šç”¨æˆ·å¯ä»¥æ‰“åˆ†ã€æ ‡æ³¨é”™è¯¯ï¼Œç³»ç»Ÿä¹Ÿç›‘æ§å»¶è¿Ÿä¸å‡†ç¡®ç‡ã€‚
è‡ªæˆ‘ä¼˜åŒ–ï¼šå®¹å™¨ B åœ¨ç”¨æˆ·åé¦ˆä¸­é€æ¸å­¦ä¼šæ›´å¥½åœ°å¤„ç†æˆè¯­ã€‚
åè®®å‡çº§ï¼šå½“ç”Ÿæ€å‘å±•åï¼Œåè®®å¢åŠ å­—æ®µ "formality_level": "casual|formal"ï¼Œæ”¯æŒæ›´ç²¾ç»†çš„è¯­å¢ƒã€‚
ğŸ‘‰ æ± å­éšä½¿ç”¨æƒ…å†µä¸æ–­å‡çº§ï¼Œè€Œä¸æ˜¯ä¸€æ¬¡æ€§å®šå‹ã€‚

5. æ–‡æ˜å±‚ï¼ˆå…±äº«ä¸æ²‰æ·€ï¼‰
ä¸åŒå¼€å‘è€…ã€å…¬å¸ã€ç”šè‡³ç”¨æˆ·éƒ½å¯ä»¥è´¡çŒ®ç¿»è¯‘å®¹å™¨ã€‚

æœ‰äººä¸“é—¨è´¡çŒ®â€œå°è¯­ç§â€å®¹å™¨ï¼Œæœ‰äººè´¡çŒ®â€œå­¦æœ¯è®ºæ–‡ä¼˜åŒ–å®¹å™¨â€ã€‚

æœ€ç»ˆå½¢æˆä¸€ä¸ªåŠ¨æ€å¼€æ”¾çš„ ç¿»è¯‘ç”Ÿæ€ï¼Œè€Œä¸æ˜¯å•ä¸€çš„ç¿»è¯‘è½¯ä»¶ã€‚

ğŸ‘‰ æ± å­æ²‰æ·€çš„ä¸æ˜¯æŸä¸ªç¿»è¯‘äº§å“ï¼Œè€Œæ˜¯ å¤šæ ·çš„ç¿»è¯‘ç»“æ„ï¼Œå¯è¢«ä»»ä½•ç³»ç»Ÿè°ƒç”¨ã€‚

ä¸€ä¸ª è¯­è¨€ç¿»è¯‘çš„ç»“æ„æ± å­ å°±åƒä¸€ä¸ªå¤šç‰©ç§çš„â€œç¿»è¯‘ç”Ÿæ€â€ï¼š

å®¹å™¨æ˜¯å„ç§ç¿»è¯‘æ¨¡å‹ï¼ˆä¸åŒé£æ ¼ã€è¯­è¨€å¯¹ã€åœºæ™¯ï¼‰ã€‚
åè®®æ˜¯ç»Ÿä¸€çš„æ¥å£è§„åˆ™ã€‚
æ²»ç†ä¿è¯è´¨é‡å’Œç§©åºã€‚
åé¦ˆé©±åŠ¨å®¹å™¨ä¼˜åŒ–å’Œåè®®å‡çº§ã€‚

æœ€ç»ˆæ²‰æ·€ä¸ºä¸€ä¸ªå…±äº«çš„æ–‡æ˜è®°å¿†ä½“ï¼Œä¾›å…¨çƒäººæœºåä½œä½¿ç”¨ã€‚

å¼€å‘çš„å…³é”®ï¼Œå°±æ˜¯ä½ å¦‚ä½•å»è®¾è®¡è¿™ä¸ªæ± å­ã€‚
>>>
ç­‰ä½ è®¤çœŸé˜…è¯»å®Œæ‰€æœ‰æˆ‘ç»™ä½ çš„èµ„æ–™ï¼Œæˆ‘ä»¬å†æ…¢æ…¢è¿›è¡Œè®¨è®ºï¼Œä½ è¦è®°ä½æ‰€æœ‰å†…å®¹ã€‚
