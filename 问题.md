⛬  简答

   •  为什么把“向量+code+字段”等放在 meta.json？
     •  我们给每个工作流做一个“可快速加载的快照”：intent、intent_embedding、workflow_code、来源/标签等都属于检索与适配的高频信息，集中进 metadata/{id}.meta.json 便于一次 I/O 拿齐并避免重复计算；而原始 JSON
        体量较大且需保持原样可直接导入 ComfyUI，所以单独保存到 workflows/{id}.json。

   •  embeddings.faiss 里具体存什么？
     •  只存浮点向量索引结构（FAISS 的内部矩阵和索引），不含文本/代码/描述；与之配套的 embeddings.faiss.mapping.json 记录“FAISS内部向量位置 → workflow_id”的映射。

   •  检索时 recall、rerank、参考来源分别来自哪里？
     •  Recall：用 query 的 embedding 在 embeddings.faiss 做相似度搜索，拿到候选的内部索引，再用 .mapping.json 映射回 workflow_id。
     •  Rerank：取这些 workflow_id 对应的 metadata/{id}.meta.json 中的 intent.description 作为 documents，走 SiliconFlow API 做语义重排。
     •  参考来源与适配材料：来自 metadata（拿 code、intent 等）+ workflows/{id}.json（原始 ComfyUI JSON）；FAISS 仅负责“向量近邻候选”，不提供文本内容。

>  faiss里面的具体是什么的向量形式？

⛬  •  存的是每个工作流的 intent.description 生成的 embedding 向量（intent_embedding），即纯数值向量，不含文本或代码。
   •  形式：float32 数组，维度为 D（ada-002/3-small 为 1536，3-large 为 3072），使用 FAISS IndexFlatL2 直接存储（N×D 的扁平索引），未做归一化/量化/聚类。
   •  距离度量：L2（实际为平方 L2），距离越小越相似；ID 映射保存在同名 .mapping.json 中。
